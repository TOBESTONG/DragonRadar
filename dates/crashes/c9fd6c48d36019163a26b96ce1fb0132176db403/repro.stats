Extracting prog: 57.995112819s
Minimizing prog: 102.72Âµs
Simplifying prog options: 1m12.935249827s
Extracting C: 20.948055543s
Simplifying C: 0s


23 programs, timeouts [30s 1m40s 6m0s]
extracting reproducer from 23 programs
testing a last program of every proc
single: executing 4 programs separately with timeout 30s
testing program (duration=30s, {Threaded:true Repeat:true RepeatTimes:0 Procs:4 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:true Cgroups:true BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): read$FUSE-read$FUSE-prlimit64-prlimit64-sched_setscheduler-getpid-socket$inet6_tcp-socket$inet6_tcp-perf_event_open-perf_event_open-ioctl$SNDRV_SEQ_IOCTL_CREATE_QUEUE-ioctl$SNDRV_SEQ_IOCTL_GET_NAMED_QUEUE-ioctl$SNDRV_SEQ_IOCTL_GET_NAMED_QUEUE-socket$netlink-close-ioctl$FIONCLEX-socket$packet-ioctl$sock_SIOCGIFINDEX-setsockopt$packet_add_memb-setsockopt$packet_drop_memb-setsockopt$packet_drop_memb-setsockopt$netlink_NETLINK_DROP_MEMBERSHIP-sendmsg$netlink-sched_setscheduler-socketpair$unix-connect$unix-connect$unix-sendmmsg$unix-recvmmsg-sendfile-syz_open_procfs-syz_open_procfs-pread64-pread64-syz_mount_image$ext4-lchown
detailed listing:
executing program 0:
read$FUSE(0xffffffffffffffff, &(0x7f0000000b00)={0x2020}, 0x2020) (async)
read$FUSE(0xffffffffffffffff, &(0x7f0000000b00)={0x2020}, 0x2020)
prlimit64(0x0, 0xe, &(0x7f00000002c0)={0x1b, 0x8b}, 0x0) (async)
prlimit64(0x0, 0xe, &(0x7f00000002c0)={0x1b, 0x8b}, 0x0)
sched_setscheduler(0x0, 0x2, &(0x7f0000000080)=0x6)
r0 = getpid()
socket$inet6_tcp(0xa, 0x1, 0x0) (async)
socket$inet6_tcp(0xa, 0x1, 0x0)
perf_event_open(&(0x7f000001d000)={0x1, 0x80, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, @perf_bp={0x0}, 0x1a, 0x0, 0x0, 0x8}, 0x0, 0xffffffffffffffff, 0xffffffffffffffff, 0x0) (async)
perf_event_open(&(0x7f000001d000)={0x1, 0x80, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, @perf_bp={0x0}, 0x1a, 0x0, 0x0, 0x8}, 0x0, 0xffffffffffffffff, 0xffffffffffffffff, 0x0)
ioctl$SNDRV_SEQ_IOCTL_CREATE_QUEUE(0xffffffffffffffff, 0xc08c5332, &(0x7f0000000080)={0x0, 0x0, 0x0, 'queue0\x00'})
ioctl$SNDRV_SEQ_IOCTL_GET_NAMED_QUEUE(0xffffffffffffffff, 0xc08c5336, 0x0) (async)
ioctl$SNDRV_SEQ_IOCTL_GET_NAMED_QUEUE(0xffffffffffffffff, 0xc08c5336, 0x0)
r1 = socket$netlink(0x10, 0x3, 0x0)
close(0xffffffffffffffff)
ioctl$FIONCLEX(0xffffffffffffffff, 0x5450)
r2 = socket$packet(0x11, 0x2, 0x300)
ioctl$sock_SIOCGIFINDEX(r2, 0x8933, &(0x7f0000000180)={'lo\x00', <r3=>0x0})
setsockopt$packet_add_memb(r2, 0x107, 0x1, &(0x7f0000000000)={r3, 0x1, 0x6, @broadcast}, 0x10)
setsockopt$packet_drop_memb(r2, 0x107, 0x2, &(0x7f0000000040)={r3, 0x1, 0x6, @broadcast}, 0x10) (async)
setsockopt$packet_drop_memb(r2, 0x107, 0x2, &(0x7f0000000040)={r3, 0x1, 0x6, @broadcast}, 0x10)
setsockopt$netlink_NETLINK_DROP_MEMBERSHIP(r1, 0x10e, 0xc, &(0x7f0000000640)=0x4, 0x4)
sendmsg$netlink(r1, &(0x7f0000000480)={0x0, 0xfffffffffffffd50}, 0x0)
sched_setscheduler(r0, 0x1, &(0x7f0000001700)=0x4)
socketpair$unix(0x1, 0x2, 0x0, &(0x7f0000000200)={<r4=>0xffffffffffffffff, <r5=>0xffffffffffffffff})
connect$unix(r4, &(0x7f000057eff8)=@file={0x0, './file1\x00'}, 0x6e) (async)
connect$unix(r4, &(0x7f000057eff8)=@file={0x0, './file1\x00'}, 0x6e)
sendmmsg$unix(r5, &(0x7f00000bd000), 0x318, 0x0)
recvmmsg(r4, &(0x7f0000000740)=[{{&(0x7f00000005c0)=@tipc, 0x80, &(0x7f0000000400)=[{&(0x7f0000001740)=""/4096, 0x1000}, {&(0x7f0000000640)=""/251, 0xfb}], 0x2}}], 0x40002db, 0x2, 0x0)
sendfile(0xffffffffffffffff, 0xffffffffffffffff, 0x0, 0x7f06)
syz_open_procfs(0x0, &(0x7f0000000000)='net/arp\x00') (async)
r6 = syz_open_procfs(0x0, &(0x7f0000000000)='net/arp\x00')
pread64(r6, &(0x7f0000000100)=""/179, 0xb3, 0x3f) (async)
pread64(r6, &(0x7f0000000100)=""/179, 0xb3, 0x3f)
syz_mount_image$ext4(&(0x7f00000005c0)='ext3\x00', &(0x7f0000000000)='./file0\x00', 0x1000, &(0x7f0000000080)={[], [{@smackfsroot={'smackfsroot', 0x3d, 'subj_type'}}, {@defcontext={'defcontext', 0x3d, 'staff_u'}}]}, 0x1, 0x4da, &(0x7f0000000600)="$eJzs3U1vVF8ZAPBnpm/TUmhBFmpUEFE0hGk7QENYKK6MMSRGlppAbYem6Uyn6UyRVhblO5hI4kqXfgDXrNy7MbpzgwsTXxoNJXEx/9w7t2UoHdo/fRnS+f2Sm3vPOTPznMPknsM8hHsC6FmXI2IjIgYj4lFEjGX1ueyIe60jed3rzWezW5vPZnPRbD74dy5tT+qi7T2JM9lnFiLiJz+I+Hnu/bj1tfXFmUqlvJKVJxrV5Yn62vqNherMfHm+vFQqTU9NT965ebt0ZGO9VB3Mrr766k8b3/ll0q3RrKZ9HEepNfSBnTiJ/oj40XEE64K+bDyD3e4IHyUfERci4kp6/49FX/ptAgCnWbM5Fs2x9jIAcNrl0xxYLl/McgGjkc8Xi60c3sUYyVdq9cb1x7XVpblWrmw8BvKPFyrlySxXOB4DuaQ8lV6/LZd2lW9GxPmI+NXQcFouztYqc938iw8A9LAzu9b//w211n8A4JQrdLsDAMCJs/4DQO+x/gNA77H+A0Dvsf4DQO+x/gNA77H+A0BP+fH9+8nR3Mqefz33ZG11sfbkxly5vlisrs4WZ2sry8X5Wm0+fWZPdb/Pq9Rqy1O3YvXp+HeX642J+tr6w2ptdanxMH2u98PywImMCgD4kPOXXv41FxEbd4fTI9r2crBWw+mW73YHgK7p63YHgK6x2xf0rkP8xpcegFNijy1631GIiOHdlc1ms3l8XQKO2bUvyf9Dr5L/h94l/w+9S/4felezmTvonv9x0BcCAJ82OX6gw7//X8jOv88eEfKzud2veHGcvQIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBP2/b+v8VsL/DRyOeLxYizETEeA7nHC5XyZESci4i/DA0MJeWpLvcZADis/D9y2f5f18auju5uHcy9GUrPEfGL3zz49dOZRmPlz0n9f3bqGy+y+lI3+g8A7Gd7nU7PbT/kX28+m90+TrI///x+RBRa8bc2B2NrJ35/9KfnQgxExMh/c1m5JdeWuziMjecR8cW9xp+L0TQH0tr5dHf8JPbZE42ffyd+Pm1rnZM/iy8cQV+g17xM5p97e91/+bicnve+/wvpDHV42fyXfNTsVjoHvo2/Pf/1dZj/Lh80xq0//rB1Nfx+2/OIL/dHbMfeapt/tuPnOsS/esD4f/vK1650amv+NuJa7B2/PdZEo7o8UV9bv7FQnZkvz5eXSqXpqenJOzdvlybSHPVE59XgX3evn+vUlox/pEP8wj7j/+YBx/+7/z/66dc/EP/b39grfj4ufiB+siZ+64DxZ0b+UOjUlsSf6zD+/b7/6weM/+rv6+9tGw4AdE99bX1xplIpr7hw4eIwF987qViD8bne1Wx+VKxOM8ZRZN2AT8HOTR8Rb7rdGQAAAAAAAAAAAAAAYE8n8T+Wuj1GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATq/PAgAA//93lNPU")
lchown(&(0x7f0000000140)='./file1\x00', 0xffffffffffffffff, 0xee00)

program did not crash
testing program (duration=30s, {Threaded:true Repeat:true RepeatTimes:0 Procs:4 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:true Cgroups:true BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): syz_mount_image$ext4
detailed listing:
executing program 0:
syz_mount_image$ext4(&(0x7f0000000040)='ext4\x00', &(0x7f00000001c0)='./file0\x00', 0x4, &(0x7f00000003c0)={[{@oldalloc}, {@noblock_validity}, {@stripe={'stripe', 0x3d, 0x6}}, {@barrier_val={'barrier', 0x3d, 0x7fff0038}}, {@errors_remount}, {@sysvgroups}, {@resuid={'resuid', 0x3d, 0xee00}}, {@resgid={'resgid', 0x3d, 0xee01}}, {@barrier_val={'barrier', 0x3d, 0x41db}, 0x32}]}, 0x1, 0x4c9, &(0x7f0000000ec0)="$eJzs3c9vG1kdAPDvTOL+TJsUOJRKtBUtSiuonTS0jTgUkBCcKgHlXkLiRFGcOIqdtokqSMUfgIQQIHHixAWJPwAJ9U9ASJXgDAIEWu22u4c97NYr2+Num7UTdzeJI/vzkV7mzTzb3++L5ed5MyNPAAPrYkRcjYgXtVqtvhzNtqdZia1mqT/u+bNHs/WSRK129+0kkmxb67WSbHkye9qxiPjh9yJ+knwybmVjc2mmVCquZeuF6vJqobKxeW1xeWahuFBcmZqavDl9a/rG9MSe9HMsIm5/57+//sUfvnv7L1978K97/7/y03paF7L2V/vxho7s1Njseq7xv2gZjoi1TxnssBnK+pPrdSIAAHSlvo//uYj4cmMeMBpDjb05AAAAoJ/UvjkSHyQRNQAAAKBvpRExEkmaz64FGIk0zeeb1/B+IU6kpXKl+tX58vrKXL0tYixy6fxiqTiRXSs8Frmkvj6ZXWPbWr++bX0qIs5ExK9GjzfW87Pl0lyvD34AAADAgDi5bf7/3mhz/g8AAAD0mbFeJwAAAADsO/N/AAAA6H/m/wAAANDXvn/nTr3UWve/nru/sb5Uvn9trlhZyi+vz+Zny2ur+YVyeaHxm33Lu71eqVxe/XqsrD8sVIuVaqGysXlvuby+Ur23+NotsAEAAIADdObCk38kEbH1jeONUnek10kBB2K4mwf983Rz+Z99TgY4UEO9TgDoma6+/4G+lOt1AkDPJbu0d7x45697nwsAALA/xr/Y+fz/zscGttIDSA/YRz7EMLic/4fB5fw/DK6cPQAYePt//r9We6OEAACAPTfSKEmaz84FjkSa5vMRpxq3Bcgl84ul4kREnI6Iv4/mjtbXJxvPTHadMwAAAAAAAAAAAAAAAAAAAAAAAAAATbVaEjUAAACgr0Wk/0uy+3+Nj14e2X584Ejy/mhjGREPfnf3Nw9nqtW1yfr2d15ur/422369F0cwAAAAgO1a8/TWPB4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tLzZ49mW+Ug47717YgYaxd/OI41lsciFxEn3k1i+JXnJRExtAfxtx5HxNl28ZN6WjGWZdEu/vEexk8j4uQexIdB9qQ+/nyr3ecvjYuNZfvP33BWPqvO41/6cvwb6jD+nOoyxrmnfyp0jP844txw+/GnFT/pEP9Sl/F//KPNzU5ttd9HjLf9/klei1WoLq8WKhub1xaXZxaKC8WVqanJm9O3pm9MTxTmF0vF7G/bGL/80p9f7NT/Ex3ij+3S/8td9v/Dpw+ffb5ZzbWLf+VS+/f/bIf4afbd95WsXm8fb9W3mvVXnf/j387v1P+5Zv+Pvun7f6XL/l/9wc//3eVDAYADUNnYXJoplYprfVupz9IPQRoqh7Dys8ORxqGs9HpkAgAA9trHO/29zgQAAAAAAAAAAAAAAAAAAAAG10H8nNj2mFu96SoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwI4+CgAA//97sNiG")

program crashed: kernel BUG in ext4_put_super
single: successfully extracted reproducer
found reproducer with 1 syscalls
minimizing guilty program
extracting C reproducer
testing compiled C program (duration=34.030885833s, {Threaded:true Repeat:true RepeatTimes:0 Procs:4 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:true Cgroups:true BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): syz_mount_image$ext4
program crashed: KASAN: use-after-free Read in ext4_put_super
a never seen crash title: KASAN: use-after-free Read in ext4_put_super, ignore
simplifying guilty program options
testing program (duration=34.030885833s, {Threaded:false Repeat:true RepeatTimes:0 Procs:4 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:true Cgroups:true BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): syz_mount_image$ext4
detailed listing:
executing program 0:
syz_mount_image$ext4(&(0x7f0000000040)='ext4\x00', &(0x7f00000001c0)='./file0\x00', 0x4, &(0x7f00000003c0)={[{@oldalloc}, {@noblock_validity}, {@stripe={'stripe', 0x3d, 0x6}}, {@barrier_val={'barrier', 0x3d, 0x7fff0038}}, {@errors_remount}, {@sysvgroups}, {@resuid={'resuid', 0x3d, 0xee00}}, {@resgid={'resgid', 0x3d, 0xee01}}, {@barrier_val={'barrier', 0x3d, 0x41db}, 0x32}]}, 0x1, 0x4c9, &(0x7f0000000ec0)="$eJzs3c9vG1kdAPDvTOL+TJsUOJRKtBUtSiuonTS0jTgUkBCcKgHlXkLiRFGcOIqdtokqSMUfgIQQIHHixAWJPwAJ9U9ASJXgDAIEWu22u4c97NYr2+Num7UTdzeJI/vzkV7mzTzb3++L5ed5MyNPAAPrYkRcjYgXtVqtvhzNtqdZia1mqT/u+bNHs/WSRK129+0kkmxb67WSbHkye9qxiPjh9yJ+knwybmVjc2mmVCquZeuF6vJqobKxeW1xeWahuFBcmZqavDl9a/rG9MSe9HMsIm5/57+//sUfvnv7L1978K97/7/y03paF7L2V/vxho7s1Njseq7xv2gZjoi1TxnssBnK+pPrdSIAAHSlvo//uYj4cmMeMBpDjb05AAAAoJ/UvjkSHyQRNQAAAKBvpRExEkmaz64FGIk0zeeb1/B+IU6kpXKl+tX58vrKXL0tYixy6fxiqTiRXSs8Frmkvj6ZXWPbWr++bX0qIs5ExK9GjzfW87Pl0lyvD34AAADAgDi5bf7/3mhz/g8AAAD0mbFeJwAAAADsO/N/AAAA6H/m/wAAANDXvn/nTr3UWve/nru/sb5Uvn9trlhZyi+vz+Zny2ur+YVyeaHxm33Lu71eqVxe/XqsrD8sVIuVaqGysXlvuby+Ur23+NotsAEAAIADdObCk38kEbH1jeONUnek10kBB2K4mwf983Rz+Z99TgY4UEO9TgDoma6+/4G+lOt1AkDPJbu0d7x45697nwsAALA/xr/Y+fz/zscGttIDSA/YRz7EMLic/4fB5fw/DK6cPQAYePt//r9We6OEAACAPTfSKEmaz84FjkSa5vMRpxq3Bcgl84ul4kREnI6Iv4/mjtbXJxvPTHadMwAAAAAAAAAAAAAAAAAAAAAAAAAATbVaEjUAAACgr0Wk/0uy+3+Nj14e2X584Ejy/mhjGREPfnf3Nw9nqtW1yfr2d15ur/422369F0cwAAAAgO1a8/TWPB4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tLzZ49mW+Ug47717YgYaxd/OI41lsciFxEn3k1i+JXnJRExtAfxtx5HxNl28ZN6WjGWZdEu/vEexk8j4uQexIdB9qQ+/nyr3ecvjYuNZfvP33BWPqvO41/6cvwb6jD+nOoyxrmnfyp0jP844txw+/GnFT/pEP9Sl/F//KPNzU5ttd9HjLf9/klei1WoLq8WKhub1xaXZxaKC8WVqanJm9O3pm9MTxTmF0vF7G/bGL/80p9f7NT/Ex3ij+3S/8td9v/Dpw+ffb5ZzbWLf+VS+/f/bIf4afbd95WsXm8fb9W3mvVXnf/j387v1P+5Zv+Pvun7f6XL/l/9wc//3eVDAYADUNnYXJoplYprfVupz9IPQRoqh7Dys8ORxqGs9HpkAgAA9trHO/29zgQAAAAAAAAAAAAAAAAAAAAG10H8nNj2mFu96SoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwI4+CgAA//97sNiG")

program crashed: KASAN: use-after-free Read in ext4_put_super
a never seen crash title: KASAN: use-after-free Read in ext4_put_super, ignore
testing program (duration=34.030885833s, {Threaded:true Repeat:false RepeatTimes:0 Procs:1 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:false Cgroups:false BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): syz_mount_image$ext4
detailed listing:
executing program 0:
syz_mount_image$ext4(&(0x7f0000000040)='ext4\x00', &(0x7f00000001c0)='./file0\x00', 0x4, &(0x7f00000003c0)={[{@oldalloc}, {@noblock_validity}, {@stripe={'stripe', 0x3d, 0x6}}, {@barrier_val={'barrier', 0x3d, 0x7fff0038}}, {@errors_remount}, {@sysvgroups}, {@resuid={'resuid', 0x3d, 0xee00}}, {@resgid={'resgid', 0x3d, 0xee01}}, {@barrier_val={'barrier', 0x3d, 0x41db}, 0x32}]}, 0x1, 0x4c9, &(0x7f0000000ec0)="$eJzs3c9vG1kdAPDvTOL+TJsUOJRKtBUtSiuonTS0jTgUkBCcKgHlXkLiRFGcOIqdtokqSMUfgIQQIHHixAWJPwAJ9U9ASJXgDAIEWu22u4c97NYr2+Num7UTdzeJI/vzkV7mzTzb3++L5ed5MyNPAAPrYkRcjYgXtVqtvhzNtqdZia1mqT/u+bNHs/WSRK129+0kkmxb67WSbHkye9qxiPjh9yJ+knwybmVjc2mmVCquZeuF6vJqobKxeW1xeWahuFBcmZqavDl9a/rG9MSe9HMsIm5/57+//sUfvnv7L1978K97/7/y03paF7L2V/vxho7s1Njseq7xv2gZjoi1TxnssBnK+pPrdSIAAHSlvo//uYj4cmMeMBpDjb05AAAAoJ/UvjkSHyQRNQAAAKBvpRExEkmaz64FGIk0zeeb1/B+IU6kpXKl+tX58vrKXL0tYixy6fxiqTiRXSs8Frmkvj6ZXWPbWr++bX0qIs5ExK9GjzfW87Pl0lyvD34AAADAgDi5bf7/3mhz/g8AAAD0mbFeJwAAAADsO/N/AAAA6H/m/wAAANDXvn/nTr3UWve/nru/sb5Uvn9trlhZyi+vz+Zny2ur+YVyeaHxm33Lu71eqVxe/XqsrD8sVIuVaqGysXlvuby+Ur23+NotsAEAAIADdObCk38kEbH1jeONUnek10kBB2K4mwf983Rz+Z99TgY4UEO9TgDoma6+/4G+lOt1AkDPJbu0d7x45697nwsAALA/xr/Y+fz/zscGttIDSA/YRz7EMLic/4fB5fw/DK6cPQAYePt//r9We6OEAACAPTfSKEmaz84FjkSa5vMRpxq3Bcgl84ul4kREnI6Iv4/mjtbXJxvPTHadMwAAAAAAAAAAAAAAAAAAAAAAAAAATbVaEjUAAACgr0Wk/0uy+3+Nj14e2X584Ejy/mhjGREPfnf3Nw9nqtW1yfr2d15ur/422369F0cwAAAAgO1a8/TWPB4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tLzZ49mW+Ug47717YgYaxd/OI41lsciFxEn3k1i+JXnJRExtAfxtx5HxNl28ZN6WjGWZdEu/vEexk8j4uQexIdB9qQ+/nyr3ecvjYuNZfvP33BWPqvO41/6cvwb6jD+nOoyxrmnfyp0jP844txw+/GnFT/pEP9Sl/F//KPNzU5ttd9HjLf9/klei1WoLq8WKhub1xaXZxaKC8WVqanJm9O3pm9MTxTmF0vF7G/bGL/80p9f7NT/Ex3ij+3S/8td9v/Dpw+ffb5ZzbWLf+VS+/f/bIf4afbd95WsXm8fb9W3mvVXnf/j387v1P+5Zv+Pvun7f6XL/l/9wc//3eVDAYADUNnYXJoplYprfVupz9IPQRoqh7Dys8ORxqGs9HpkAgAA9trHO/29zgQAAAAAAAAAAAAAAAAAAAAG10H8nNj2mFu96SoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwI4+CgAA//97sNiG")

program crashed: KASAN: use-after-free Read in ext4_put_super
a never seen crash title: KASAN: use-after-free Read in ext4_put_super, ignore
testing program (duration=34.030885833s, {Threaded:true Repeat:true RepeatTimes:0 Procs:1 Slowdown:1 Sandbox:none SandboxArg:0 Leak:false NetInjection:false NetDevices:true NetReset:true Cgroups:true BinfmtMisc:true CloseFDs:true KCSAN:false DevlinkPCI:false NicVF:false USB:false VhciInjection:false Wifi:false IEEE802154:false Sysctl:true Swap:true UseTmpDir:true HandleSegv:true Trace:false LegacyOptions:{Collide:false Fault:false FaultCall:0 FaultNth:0}}): syz_mount_image$ext4
detailed listing:
executing program 0:
syz_mount_image$ext4(&(0x7f0000000040)='ext4\x00', &(0x7f00000001c0)='./file0\x00', 0x4, &(0x7f00000003c0)={[{@oldalloc}, {@noblock_validity}, {@stripe={'stripe', 0x3d, 0x6}}, {@barrier_val={'barrier', 0x3d, 0x7fff0038}}, {@errors_remount}, {@sysvgroups}, {@resuid={'resuid', 0x3d, 0xee00}}, {@resgid={'resgid', 0x3d, 0xee01}}, {@barrier_val={'barrier', 0x3d, 0x41db}, 0x32}]}, 0x1, 0x4c9, &(0x7f0000000ec0)="$eJzs3c9vG1kdAPDvTOL+TJsUOJRKtBUtSiuonTS0jTgUkBCcKgHlXkLiRFGcOIqdtokqSMUfgIQQIHHixAWJPwAJ9U9ASJXgDAIEWu22u4c97NYr2+Num7UTdzeJI/vzkV7mzTzb3++L5ed5MyNPAAPrYkRcjYgXtVqtvhzNtqdZia1mqT/u+bNHs/WSRK129+0kkmxb67WSbHkye9qxiPjh9yJ+knwybmVjc2mmVCquZeuF6vJqobKxeW1xeWahuFBcmZqavDl9a/rG9MSe9HMsIm5/57+//sUfvnv7L1978K97/7/y03paF7L2V/vxho7s1Njseq7xv2gZjoi1TxnssBnK+pPrdSIAAHSlvo//uYj4cmMeMBpDjb05AAAAoJ/UvjkSHyQRNQAAAKBvpRExEkmaz64FGIk0zeeb1/B+IU6kpXKl+tX58vrKXL0tYixy6fxiqTiRXSs8Frmkvj6ZXWPbWr++bX0qIs5ExK9GjzfW87Pl0lyvD34AAADAgDi5bf7/3mhz/g8AAAD0mbFeJwAAAADsO/N/AAAA6H/m/wAAANDXvn/nTr3UWve/nru/sb5Uvn9trlhZyi+vz+Zny2ur+YVyeaHxm33Lu71eqVxe/XqsrD8sVIuVaqGysXlvuby+Ur23+NotsAEAAIADdObCk38kEbH1jeONUnek10kBB2K4mwf983Rz+Z99TgY4UEO9TgDoma6+/4G+lOt1AkDPJbu0d7x45697nwsAALA/xr/Y+fz/zscGttIDSA/YRz7EMLic/4fB5fw/DK6cPQAYePt//r9We6OEAACAPTfSKEmaz84FjkSa5vMRpxq3Bcgl84ul4kREnI6Iv4/mjtbXJxvPTHadMwAAAAAAAAAAAAAAAAAAAAAAAAAATbVaEjUAAACgr0Wk/0uy+3+Nj14e2X584Ejy/mhjGREPfnf3Nw9nqtW1yfr2d15ur/422369F0cwAAAAgO1a8/TWPB4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tLzZ49mW+Ug47717YgYaxd/OI41lsciFxEn3k1i+JXnJRExtAfxtx5HxNl28ZN6WjGWZdEu/vEexk8j4uQexIdB9qQ+/nyr3ecvjYuNZfvP33BWPqvO41/6cvwb6jD+nOoyxrmnfyp0jP844txw+/GnFT/pEP9Sl/F//KPNzU5ttd9HjLf9/klei1WoLq8WKhub1xaXZxaKC8WVqanJm9O3pm9MTxTmF0vF7G/bGL/80p9f7NT/Ex3ij+3S/8td9v/Dpw+ffb5ZzbWLf+VS+/f/bIf4afbd95WsXm8fb9W3mvVXnf/j387v1P+5Zv+Pvun7f6XL/l/9wc//3eVDAYADUNnYXJoplYprfVupz9IPQRoqh7Dys8ORxqGs9HpkAgAA9trHO/29zgQAAAAAAAAAAAAAAAAAAAAG10H8nNj2mFu96SoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwI4+CgAA//97sNiG")

program crashed: KASAN: use-after-free Read in ext4_put_super
a never seen crash title: KASAN: use-after-free Read in ext4_put_super, ignore
reproducing took 2m31.87853803s
repro crashed as (corrupted=false):
0000000080280ba2: 8446cee0 ffffffff 00020000 00000000  ..F.............
00000000e81f81fd: 8720c360 ffffffff 00000000 00000000  `. .............
00000000b9b0671a: 00000000 00000000 844f5140 ffffffff  ........@QO.....
kernel BUG at fs/ext4/super.c:1243!
00000000bc982fcd: 00030000 00000000 00000000 00000000  ................
00000000f538aad4: 1845a9c0 ffff8880 1845a9c0 ffff8880  ..E.......E.....
0000000084a6e340: 00000000 00000000 00000000 00000000  ................
invalid opcode: 0000 [#1] PREEMPT SMP KASAN NOPTI
00000000697777f5: 8452b640 ffffffff 00000010 00000000  @.R.............
CPU: 1 PID: 834 Comm: syz-executor Not tainted 5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
000000005d6cfe7a: 00000000 00000000 00000000 dead4ead  .............N..
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
0000000095eed793: ffffffff 00000000 ffffffff ffffffff  ................
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
00000000a30df52a: 8720c320 ffffffff 00000000 00000000   . .............
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555556fde500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
00000000eeb288c6: 00000000 00000000 844f5180 ffffffff  .........QO.....
CR2: 00007fb8afde5020 CR3: 000000000ab38000 CR4: 0000000000350ee0
Call Trace:
000000006412706f: 00020000 00000000 18467310 ffff8880  .........sF.....
 generic_shutdown_super+0x142/0x370 fs/super.c:464
000000005062664f: 18467310 ffff8880 00000000 00000000  .sF.............
 kill_block_super+0x9d/0xf0 fs/super.c:1446
000000004d76d06c: 18467328 ffff8880 18467328 ffff8880  (sF.....(sF.....
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
00000000ef75665d: 00000000 00000000 1ed2ac1e 00000000  ................
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
000000007e533f92: 00000000 00000000 00000000 00000000  ................
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000a933804b: 00000000 00000000 00000000 dead4ead  .............N..
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f1bdbf21227
00000000ba74053e: ffffffff 00000000 ffffffff ffffffff  ................
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffe3d7fc2c8 EFLAGS: 00000246
00000000bd9d6456: 872133c0 ffffffff 00000000 00000000  .3!.............
 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f1bdbf92a14 RCX: 00007f1bdbf21227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffe3d7fc380
000000007a0fe568: 00000000 00000000 845353e0 ffffffff  .........SS.....
RBP: 00007ffe3d7fc380 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffe3d7fd400
R13: 00007f1bdbf92a14 R14: 0000000000013f44 R15: 00007ffe3d7fd440
00000000fafc1ae5: 00020000 00000000 00000000 00000000  ................
Modules linked in:
00000000f1f58e0f: 1845a968 ffff8880 872130c0 ffffffff  h.E......0!.....
00000000ea639cc7: 00000000 00000000 00000000 00000000  ................
000000002c1e49c4: 00000000 00000000 00000000 00000000  ................
000000007b10cab2: 184673b8 ffff8880 184673b8 ffff8880  .sF......sF.....
00000000eca903eb: 84535200 ffffffff 00030000 00000000  .RS.............
EXT4-fs (loop2): Ignoring removed oldalloc option
000000006f83724d: 00000000 00000000 00000000 00000000  ................
00000000253cc05d: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000a3c23436: 00000000 00000000 00000000 dead4ead  .............N..
000000009f88c827: ffffffff ffffffff 87213380 ffffffff  .........3!.....
0000000005603246: ffffffff 00000000 ffffffff ffffffff  ................
00000000e848899e: 86e8ef80 ffffffff 00000000 00000000  ................
000000004477654b: 84535420 ffffffff 00020000 00000000   TS.............
00000000b642f649: 00000000 00000000 00000000 00000000  ................
000000001fa328d0: 00000000 00000000 deaf1eed ffffffff  ................
0000000060dabbb1: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
000000003340a580: 86e81600 ffffffff 00000000 00000000  ................
0000000016615968: 84535460 ffffffff 00020000 00000000  `TS.............
00000000848c22ec: 18467458 ffff8880 18467458 ffff8880  XtF.....XtF.....
00000000db6c1dcf: 00000000 00000000 00000000 ffffffff  ................
00000000cb7bca41: 00000000 00000000 00000000 00000000  ................
000000008e55d56a: 00000000 00000000 00000000 00000000  ................
00000000d067593d: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000055790a66: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
00000000918853d3: 00000000 00000000 00000000 00000000  ................
00000000fffd6fa2: 845354e0 ffffffff 00020000 00000000  .TS.............
0000000034340160: 184674d8 ffff8880 184674d8 ffff8880  .tF......tF.....
000000002f7401a5: ffffffe0 0000000f 184674f0 ffff8880  .........tF.....
000000003756d582: 184674f0 ffff8880 81ace550 ffffffff  .tF.....P.......
0000000076483f00: 87213280 ffffffff 00000000 00000000  .2!.............
000000000fdb4348: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000c0c6f96a: 86749140 ffffffff 00000000 00000000  @.t.............
00000000343cb503: 00000000 00000000 00000000 00000000  ................
0000000006085d53: 00000000 00000000 8446cee0 ffffffff  ..........F.....
00000000f47015e5: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000f1d333b8: 00020000 ffffffff 1845aa58 ffff8880  ........X.E.....
000000006448ae8b: ffffffff ffffffff 87213300 ffffffff  .........3!.....
00000000bf96b5ce: 1845aa58 ffff8880 1845aa00 ffff8880  X.E.......E.....
00000000eedcf9fc: 00000000 00000000 00000000 00000000  ................
00000000e1930938: 87213080 ffffffff 00000000 00000000  .0!.............
000000009fa23392: 845354a0 ffffffff 00020000 00000000  .TS.............
0000000086b1a5bc: 00000000 00000000 00000000 00000000  ................
000000005bc5bc07: 00000000 00000000 84535240 ffffffff  ........@RS.....
[EXT4 FS bs=4096, gc=1, bpg=32768, ipg=32, mo=8842e028, mo2=0002]
000000004bf169e1: 00030000 00000000 000881ed 00000000  ................
EXT4-fs error (device loop2): ext4_mb_mark_diskspace_used:3233: comm syz.2.17: Allocating blocks 41-42 which overlap fs metadata
000000004e559077: 00000000 00000000 ffffffff ffffffff  ................
EXT4-fs (loop2): Remounting filesystem read-only
0000000064f71641: ffffffff ffffffff 84527840 ffffffff  ........@xR.....
Quota error (device loop2): write_blk: dquota write failed
0000000009c363f8: 0b78e000 ffff8880 1845acb0 ffff8880  ..x.......E.....
00000000ef6a69db: 00000000 00000000 00000000 00000000  ................
---[ end trace a98080626cc4ab88 ]---
00000000c7b6cd61: 00000000 00000000                    ........
CPU: 0 PID: 833 Comm: syz-executor Tainted: G      D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
000000004b381462: 104f8c38 ffff8880 00000010 00000000  8.O.............
Call Trace:
0000000052ceefed: 00000002 00000000 00002328 00000000  ........(#......
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
00000000177e5467: 637cf1f2 00000000 00000000 00000000  ..|c............
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191

 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
00000000e6d89a10: 637cf1f2 00000000 00000000 00000000  ..|c............
RIP: 0033:0x7fb78fed0227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
0000000033025100: 637cf1f2 00000000 00000000 00000000  ..|c............
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
00000000fa1050a5: 00000000 dead4ead ffffffff 00000000  .....N..........
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90
0000000015809a4d: ffffffff ffffffff 85321128 ffffffff  ........(.2.....
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
000000000d8e52cf: 86e81540 ffffffff 00000000 00000000  @...............
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
0000000024e92562: 844f5280 ffffffff 00020000 00000000  .RO.............
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
00000000e7fbef96: 000c0000 00000000 00000018 00000000  ................
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555556fde500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
0000000020d53c54: 00000060 00000000 00000000 00000000  `...............
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
0000000024176809: 00000000 00000000 00000000 00000000  ................
CR2: 00007fb8afdf0028 CR3: 000000000ab38000 CR4: 0000000000350ef0
Quota error (device loop2): qtree_write_dquot: Error -117 occurred while creating quota
00000000df29ab05: 00000000 dead4ead ffffffff 00000000  .....N..........
EXT4-fs (loop2): ext4_orphan_cleanup: truncating inode 16 to 9000 bytes
0000000026bbfbc2: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
EXT4-fs (loop2): 1 truncate cleaned up
000000008c3dab87: 00000000 00000000 00000000 00000000  ................
EXT4-fs (loop2): mounted filesystem without journal. Opts: oldalloc,noblock_validity,stripe=0x0000000000000006,barrier=0x000000007fff0038,errors=remount-ro,sysvgroups,resuid=0x000000000000ee00,resgid=0x000000000000ee01,barrier=0x00000000000041db2
00000000203b0dc1: 8446cee0 ffffffff 00020000 00000000  ..F.............
ext4 filesystem being mounted at /0/file0 supports timestamps until 2038 (0x7fffffff)
0000000069d5a958: 1845abd0 ffff8880 1845abd0 ffff8880  ..E.......E.....
000000009e1592ad: 1845ab78 ffff8880 85321138 ffffffff  x.E.....8.2.....
EXT4-fs (loop2): Inode 16 (00000000757d498c): orphan list check failed!
0000000072207fdc: 86e8b8c0 ffffffff 00000000 00000000  ................
00000000757d498c: 0001f30a 00000004 00000000 00000002  ................
0000000060726d34: 844f52c0 ffffffff 00030000 00000000  .RO.............
0000000084f75127: 00000003 00000025 00000002 00000001  ....%...........
000000005f9b243a: 00000000 00000000 00000000 00000000  ................
00000000d85ea74e: 00000027 00000002 00008001 00000027  '...........'...
00000000537f2da7: 00000000 00000000 00000000 00000000  ................
EXT4-fs (loop3): sb orphan head is 0
00000000e3cfd398: 1845ac30 ffff8880 1845ac30 ffff8880  0.E.....0.E.....
sb_info orphan list:
==================================================================
00000000a4246544: 1845ac40 ffff8880 1845ac40 ffff8880  @.E.....@.E.....
BUG: KASAN: use-after-free in dump_orphan_list fs/ext4/super.c:1135 [inline]
BUG: KASAN: use-after-free in ext4_put_super+0x1119/0x11b0 fs/ext4/super.c:1242
Read of size 4 at addr ffff888018466c84 by task syz-executor/833

CPU: 0 PID: 833 Comm: syz-executor Tainted: G      D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 print_address_description.constprop.0+0x1c/0x210 mm/kasan/report.c:385
00000000529e1435: 1845ac50 ffff8880 1845ac50 ffff8880  P.E.....P.E.....
 __kasan_report mm/kasan/report.c:545 [inline]
 kasan_report.cold+0x37/0x7c mm/kasan/report.c:562
00000000c74d722a: 1845ac60 ffff8880 1845ac60 ffff8880  `.E.....`.E.....
000000003f955680: 00000000 00000000 00000000 00000000  ................
 dump_orphan_list fs/ext4/super.c:1135 [inline]
 ext4_put_super+0x1119/0x11b0 fs/ext4/super.c:1242
000000004dedbaba: 00000003 00000000 00000000 00000000  ................
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
000000003f94ef58: 00000000 00000000 00000000 00000000  ................
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
00000000df37d9c5: 84527920 ffffffff 00000000 00000000   yR.............
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000aff51234: 1845aa98 ffff8880 00000000 dead4ead  ..E..........N..
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7fb78fed0227
00000000658b816e: ffffffff 00000000 ffffffff ffffffff  ................
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
00000000d5a8ddf1: 8720c2e0 ffffffff 86e79d40 ffffffff  .. .....@.......
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
000000007911afce: 00000000 00000000 844f5100 ffffffff  .........QO.....
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
0000000048ba061a: 00020000 00000000 00000021 00000000  ........!.......
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90

Allocated by task 2645:
0000000006ef48f9: 00000000 00000000 00100cca 00000000  ................
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
 kasan_set_track mm/kasan/common.c:56 [inline]
 __kasan_kmalloc.constprop.0+0xc2/0xd0 mm/kasan/common.c:461
00000000337a0d6d: 00000000 00000000 00000000 00000000  ................
 slab_post_alloc_hook mm/slab.h:535 [inline]
 slab_alloc_node mm/slub.c:2891 [inline]
 slab_alloc mm/slub.c:2899 [inline]
 kmem_cache_alloc+0x145/0x330 mm/slub.c:2904
 ext4_alloc_inode+0x1a/0x630 fs/ext4/super.c:1294
 alloc_inode+0x63/0x230 fs/inode.c:234
000000005843466f: 00000000 00000000 00000000 00000000  ................
 iget_locked+0x1c6/0x610 fs/inode.c:1195
 __ext4_iget+0x27c/0x4180 fs/ext4/inode.c:4619
 ext4_orphan_get+0x284/0x6f0 fs/ext4/ialloc.c:1385
00000000e7cb6d48: 00000000 00000000 00000000 dead4ead  .............N..
 ext4_orphan_cleanup fs/ext4/super.c:3088 [inline]
 ext4_fill_super+0x90de/0xd960 fs/ext4/super.c:5067
 mount_bdev+0x350/0x410 fs/super.c:1419
 legacy_get_tree+0x105/0x220 fs/fs_context.c:592
0000000019e9770a: ffffffff 00000000 ffffffff ffffffff  ................
 vfs_get_tree+0x8e/0x360 fs/super.c:1549
 do_new_mount fs/namespace.c:2875 [inline]
 path_mount+0x1318/0x2060 fs/namespace.c:3205
 do_mount fs/namespace.c:3218 [inline]
 __do_sys_mount fs/namespace.c:3426 [inline]
 __se_sys_mount fs/namespace.c:3403 [inline]
 __x64_sys_mount+0x27e/0x300 fs/namespace.c:3403
0000000031e677f2: 86749140 ffffffff 00000000 00000000  @.t.............
 do_syscall_64+0x33/0x40 arch/x86/entry/common.c:46
 entry_SYSCALL_64_after_hwframe+0x44/0xa9

000000005d815142: 00000000 00000000 8446cee0 ffffffff  ..........F.....
Freed by task 9:
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
 kasan_set_track+0x1c/0x30 mm/kasan/common.c:56
0000000050cbf19d: 00020000 00000000 1845ad78 ffff8880  ........x.E.....
 kasan_set_free_info+0x1b/0x30 mm/kasan/generic.c:355
 __kasan_slab_free+0x110/0x150 mm/kasan/common.c:422
 slab_free_hook mm/slub.c:1544 [inline]
 slab_free_freelist_hook+0x53/0x130 mm/slub.c:1577
0000000019e36fff: 1845ad78 ffff8880 1845ad20 ffff8880  x.E..... .E.....
 slab_free mm/slub.c:3142 [inline]
 kmem_cache_free+0x97/0x340 mm/slub.c:3158
 i_callback+0x42/0x70 fs/inode.c:223
 rcu_do_batch+0x496/0x1440 kernel/rcu/tree.c:2476
 rcu_core+0x62d/0x9d0 kernel/rcu/tree.c:2711
0000000031a84ab3: 8720c360 ffffffff 00000000 00000000  `. .............
 __do_softirq+0x295/0xa3f kernel/softirq.c:298

Last call_rcu():
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
00000000cb3f74d6: 00000000 00000000 844f5140 ffffffff  ........@QO.....
 kasan_record_aux_stack+0x9e/0xb0 mm/kasan/generic.c:346
 __call_rcu kernel/rcu/tree.c:2953 [inline]
 call_rcu+0xe6/0x13b0 kernel/rcu/tree.c:3027
 destroy_inode+0x12f/0x1c0 fs/inode.c:289
00000000e56e2a80: 00030000 00000000 00000000 00000000  ................
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
000000008af169f3: 00000000 00000000 00000000 00000000  ................
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
00000000701f69ac: 8452b640 ffffffff 00000010 00000000  @.R.............
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
00000000799c30d5: 00000000 00000000 00000000 dead4ead  .............N..
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000b4536591: ffffffff 00000000 ffffffff ffffffff  ................
 entry_SYSCALL_64_after_hwframe+0x44/0xa9

0000000048955ed7: 8720c320 ffffffff 00000000 00000000   . .............
The buggy address belongs to the object at ffff888018466c48
 which belongs to the cache ext4_inode_cache of size 2392
The buggy address is located 60 bytes inside of
 2392-byte region [ffff888018466c48, ffff8880184675a0)
The buggy address belongs to the page:
0000000036ca8c0d: 00000000 00000000 844f5180 ffffffff  .........QO.....
page:000000001ae11191 refcount:1 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0x18460
000000000ba529d8: 00020000 00000000 1845ae28 ffff8880  ........(.E.....
head:000000001ae11191 order:3 compound_mapcount:0 compound_pincount:0
flags: 0x100000000010200(slab|head)
raw: 0100000000010200 dead000000000100 dead000000000122 ffff88800a8d1500
00000000aa4f8402: 1845ae28 ffff8880 00000000 00000000  (.E.............
raw: 0000000000000000 00000000800d000d 00000001ffffffff ffff888010489f01
000000003955e30b: 1845ae40 ffff8880 1845ae40 ffff8880  @.E.....@.E.....
page dumped because: kasan: bad access detected
page->mem_cgroup:ffff888010489f01

Memory state around the buggy address:
 ffff888018466b80: fb fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc
000000001882826d: 00000000 00000000 1ed2ac1e 00000000  ................
 ffff888018466c00: fc fc fc fc fc fc fc fc fc fa fb fb fb fb fb fb
0000000033671857: 00000000 00000000 00000000 00000000  ................
>ffff888018466c80: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
00000000de1c34bf: 00000000 00000000 00000000 dead4ead  .............N..
                   ^
00000000971177b8: ffffffff 00000000 ffffffff ffffffff  ................
 ffff888018466d00: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
000000009568878d: 872133c0 ffffffff 00000000 00000000  .3!.............
 ffff888018466d80: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
==================================================================
00000000ffcaf4e2: 00000000 00000000 00000000 00000000  ................
000000002af28991: 00000000 00000000 845353e0 ffffffff  .........SS.....
00000000557c5d49: 00020000 00000000 00000000 00000000  ................
00000000f894b2cb: 00000000 00000000 00000000 9080008e  ................
00000000beea75bc: 00000000 00000000 00000000 00000000  ................
0000000026819dd0: 1845aed0 ffff8880 1845aed0 ffff8880  ..E.......E.....
00000000ec617a04: 00080000 00000000 00000000 00000000  ................
000000004960228a: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000fa0e9272: 00000000 00000000 00000000 00000000  ................
00000000fc6bf12d: ffffffff ffffffff 87213380 ffffffff  .........3!.....
000000001f6391d1: 00000000 dead4ead ffffffff dead4ead  .....N.......N..
0000000022601077: 86e8ef80 ffffffff 00000000 00000000  ................
00000000821bad9b: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
00000000abead20b: 84535420 ffffffff 00020000 00000000   TS.............
000000005ebd4b58: 00000000 00000000 00000000 00000000  ................
00000000cd0593a2: 00000000 00000000 00000000 00000000  ................
00000000654308cd: 00000000 00000000 deaf1eed ffffffff  ................
00000000ba41e3ce: 8446cee0 ffffffff 00020000 ffffffff  ..F.............
00000000b6c01f86: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
00000000269518f1: 1845d948 ffff8880 1845d948 ffff8880  H.E.....H.E.....
0000000006398953: 86e81600 ffffffff 00000000 00000000  ................
00000000639cf81b: 1845d8f0 ffff8880 87213100 ffffffff  ..E......1!.....
000000001e0b03ec: 84535460 ffffffff 00020000 00000000  `TS.............
00000000b232574a: 00000000 00000000 00000000 00000000  ................
00000000ac9e4c1e: 1845af70 ffff8880 1845af70 ffff8880  p.E.....p.E.....
000000004c22a9c3: 845351c0 ffffffff 00030000 00000000  .QS.............
00000000e49d6974: 00000000 00000000 00000000 ffffffff  ................
000000005c6b29e4: 0b7b4318 ffff8880 0b7b4318 ffff8880  .C{......C{.....
00000000a3c273fe: 00000000 ffffffff 00000000 00000000  ................
00000000d6322d67: 1845d998 ffff8880 1845d998 ffff8880  ..E.......E.....
00000000ea5f8f4c: 00000000 00000000 00000000 00000000  ................
0000000076094d98: 00000000 00000000 00000000 00000000  ................
00000000c133f1be: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000743d3bbc: 00000000 dead4ead ffffffff ffff8880  .....N..........
000000003bf7d32d: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
000000009affc44f: 00000000 00000000 00000000 00000000  ................
0000000015703eea: 845354e0 ffffffff 00020000 00000000  .TS.............
000000009d2f8939: 1845aff0 ffff8880 1845aff0 ffff8880  ..E.......E.....
00000000051e680e: ffffffe0 0000000f 1845b008 ffff8880  ..........E.....
00000000a61d14c0: ffffffff ffffffff 87214580 ffffffff  .........E!.....
0000000049d58a5c: 00000000 00000000 00000000 00000000  ................
0000000013e52836: 1845b008 ffff8880 81ace550 ffffffff  ..E.....P.......
000000008fe1c580: 84545900 ffffffff 00020000 00000000  .YT.............
00000000e2ea6c5e: 87213280 ffffffff 00000000 00000000  .2!.............
000000002ba06e36: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000dd738acd: 00000000 00000000 00000000 00000000  ................
00000000447a1d97: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000be987cf6: ffffffff ffffffff 87213300 ffffffff  .........3!.....
000000006d939fc9: 1845d9f8 ffff8880 1845d9f8 ffff8880  ..E.......E.....
0000000089bea09e: 00000000 00000000 00000000 00000000  ................
0000000077005ba8: 845354a0 ffffffff 00020000 dead4ead  .TS..........N..
00000000c97481f2: 00000000 00000000 00000000 dead4ead  .............N..
00000000637c6e1f: ffffffff 00000000 ffffffff ffffffff  ................
00000000a2aff007: 00000000 00000000 00000000 00000000  ................
00000000f4d745c9: 86749100 ffffffff 00000000 00000000  ..t.............
0000000039fade53: 00000000 00000000 00000000 00000000  ................
0000000035107729: 00000000 00000000                    ........
CPU: 1 PID: 823 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
000000004868a7ad: 00000000 00000000 8446cb00 ffffffff  ..........F.....
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
  inode loop3:16 at 0000000044cb9b05: mode 100755, nlink 2, next 0
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
------------[ cut here ]------------
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
kernel BUG at fs/ext4/super.c:1243!
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
invalid opcode: 0000 [#2] PREEMPT SMP KASAN NOPTI
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
CPU: 0 PID: 833 Comm: syz-executor Tainted: G    B D           5.10.0 #1
RIP: 0033:0x7fd0d9d68227
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 002b:00007ffca3f95ad8 EFLAGS: 00000246
RSP: 0018:ffff888010d5fd98 EFLAGS: 00010293
 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fd0d9dd9a14 RCX: 00007fd0d9d68227
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: ffffffff81b3ffad
RDX: ffff88802064ce00 RSI: ffffffff81b3fcef RDI: ffff888018466d38
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffca3f95b90
RBP: 00007ffca3f95b90 R08: 0000000000000000 R09: 0000000000000000
RBP: ffff88800c2c2000 R08: 0000000000000042 R09: ffff88806ce2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800c2c0000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffca3f96c10
R13: 00007fd0d9dd9a14 R14: 000000000001402f R15: 00007ffca3f96c50
R13: ffff888018466f80 R14: ffff88800c2c2318 R15: ffff88800c2c2318
00000000c5a10ef1: 00020000 00000000 00000000 00000000  ................
FS:  000055555663a500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afe27010 CR3: 000000001f57a000 CR4: 0000000000350ef0
Call Trace:
0000000016d7a676: 1845da58 ffff8880 1845da58 ffff8880  X.E.....X.E.....
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
00000000b0b27111: 1845da08 ffff8880 87213240 ffffffff  ..E.....@2!.....
 deactivate_locked_super+0x95/0x110 fs/super.c:335
00000000b80e8e0e: 00000000 00000000 00000000 00000000  ................
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
00000000a2b6d56b: 84535580 ffffffff 00030000 ffffffff  .US.............
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
000000007664b558: 00002328 00000000 00000000 00000000  (#..............
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7fb78fed0227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
00000000a04f61a3: 00000000 00000000 00000000 ffffffff  ................
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
00000000e9ba8e92: 00000000 dead4ead ffffffff ffff8880  .....N..........
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
000000004993ae39: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
000000006cd1ca6d: 00000000 00000000 00000000 00000000  ................
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90
Modules linked in:
---[ end trace a98080626cc4ab89 ]---
EXT4-fs (loop0): sb orphan head is 0
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
sb_info orphan list:
  inode loop0:16 at 00000000eb4f1d2f: mode 100755, nlink 2, next 0
------------[ cut here ]------------
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
kernel BUG at fs/ext4/super.c:1243!
invalid opcode: 0000 [#3] PREEMPT SMP KASAN NOPTI
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
CPU: 1 PID: 823 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243

Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88801f0b7d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RDX: ffff88801e660000 RSI: ffffffff81b3fcef RDI: ffffed1003e16fa4
RBP: ffff888021470000 R08: 0000000000000042 R09: ffff88806cf1ff9b
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800b78e000
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
R13: ffff88801845aa98 R14: ffff888021470318 R15: ffff888021470318
FS:  0000555555bbf500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afdaa250 CR3: 0000000008be2000 CR4: 0000000000350ee0
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
Call Trace:
 generic_shutdown_super+0x142/0x370 fs/super.c:464
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
FS:  000055555663a500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
CR2: 00007fb8afe27010 CR3: 000000001f57a000 CR4: 0000000000350ef0
RIP: 0033:0x7fd0d9d68227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
0000000046f41690: 8446cee0 ffffffff 00020000 00000000  ..F.............
RSP: 002b:00007ffca3f95ad8 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fd0d9dd9a14 RCX: 00007fd0d9d68227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffca3f95b90
00000000dfe34ce4: 1845daf8 ffff8880 1845daf8 ffff8880  ..E.......E.....
RBP: 00007ffca3f95b90 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffca3f96c10
R13: 00007fd0d9dd9a14 R14: 000000000001402f R15: 00007ffca3f96c50
00000000fe5ccf10: 1845daa0 ffff8880 872130c0 ffffffff  ..E......0!.....
Modules linked in:
---[ end trace a98080626cc4ab8a ]---
000000001e5c0e33: 00000000 00000000 00000000 00000000  ................
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
000000006bd1bdcf: 84535200 ffffffff 00030000 ffff8880  .RS.............
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
0000000046f248dd: 00000000 00000000 00000000 00000000  ................
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
00000000c1ce71a6: 00000000 00000000 00000000 dead4ead  .............N..

00000000d6669ab0: ffffffff 00000000 ffffffff ffffffff  ................
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
0000000063bb096c: 86749140 ffffffff 00000000 00000000  @.t.............
0000000085d24a0c: 00000000 00000000 8446cee0 ffffffff  ..........F.....
00000000e3e9f5f9: 00020000 dead4ead 1845db90 ffff8880  .....N....E.....
000000006d062857: 1845db90 ffff8880 1845db38 ffff8880  ..E.....8.E.....
000000004485c5f9: 87213080 ffffffff 00000000 00000000  .0!.............
00000000d6653799: 00000000 00000000 84535240 ffffffff  ........@RS.....
000000005c96a0c9: 00030000 00000000 000881ed 00000000  ................
0000000075256f18: 00000000 00000000 ffffffff ffffffff  ................
0000000035ab4672: ffffffff ffffffff 84527840 ffffffff  ........@xR.....
00000000c531253f: 0a994000 ffff8880 1845dde8 ffff8880  .@........E.....
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
00000000c4443fe1: 0bd858a0 ffff8880 00000010 00000000  .X..............
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
00000000196d00d7: 00000002 00000000 00002328 00000000  ........(#......
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555555bbf500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
0000000026266de6: 637cf1f2 00000000 00000000 00000000  ..|c............
00000000ac561f4c: 637cf1f2 00000000 00000000 00000000  ..|c............
00000000a4a9af8d: 637cf1f2 00000000 00000000 00000000  ..|c............
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f79a18676f4 CR3: 0000000008be2000 CR4: 0000000000350ee0
00000000091a14a7: 00000000 dead4ead ffffffff 00000000  .....N..........
000000009f381fea: ffffffff ffffffff 85321128 ffffffff  ........(.2.....
000000008900f91b: 00000000 00000000 00000000 00000000  ................
0000000021b49270: 844f5280 ffffffff 00020000 00000000  .RO.............
0000000032e82a09: 000c0000 00000000 00000018 00000000  ................
0000000008a42701: 00000060 00000000 00000000 00000000  `...............
0000000024fc4387: 00000000 00000000 00000000 00000000  ................
0000000038f2ec87: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000054f7b34c: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
00000000453e63f5: 00000000 00000000 00000000 00000000  ................
0000000029baedc6: 8446cee0 ffffffff 00020000 00000000  ..F.............
0000000090d49eb3: 1845dd08 ffff8880 1845dd08 ffff8880  ..E.......E.....
00000000301e149f: 1845dcb0 ffff8880 85321138 ffffffff  ..E.....8.2.....
00000000c25bc8b4: 00000000 00000000 00000000 00000000  ................
00000000dfe77b1b: 844f52c0 ffffffff 00030000 00000000  .RO.............
00000000324d1cb6: 00000000 00000000 00000000 00000000  ................
00000000c9de1561: 00000000 00000000 00000000 00000000  ................
00000000d863e450: 1845dd68 ffff8880 1845dd68 ffff8880  h.E.....h.E.....
00000000e1ca302c: 1845dd78 ffff8880 1845dd78 ffff8880  x.E.....x.E.....
00000000c80398b0: 1845dd88 ffff8880 1845dd88 ffff8880  ..E.......E.....
00000000033ab707: 1845dd98 ffff8880 1845dd98 ffff8880  ..E.......E.....
000000003c3d3875: 00000000 00000000 00000000 00000000  ................
000000008b0cd5d0: 00000003 00000000 00000000 00000000  ................
0000000010b7e4a8: 00000000 00000000 00000000 00000000  ................
00000000d3c3d488: 84527920 ffffffff 00000000 00000000   yR.............
00000000cb1efa25: 1845dbd0 ffff8880 00000000 dead4ead  ..E..........N..
000000008aa6d841: ffffffff 00000000 ffffffff ffffffff  ................
000000007c4bb1fd: 8720c2e0 ffffffff 00000000 00000000  .. .............
00000000703fdff2: 00000000 00000000 844f5100 ffffffff  .........QO.....
000000007184f12d: 00020000 00000000 00000021 00000000  ........!.......
0000000051faffcb: 00000000 00000000 00100cca 00000000  ................
000000001d587dc4: 00000000 00000000 00000000 00000000  ................
0000000057165b58: 00000000 00000000 00000000 00000000  ................
00000000b1ece1e0: 00000000 00000000 00000000 dead4ead  .............N..
00000000581a821a: ffffffff 00000000 ffffffff ffffffff  ................
00000000e2400f8a: 86749140 ffffffff 00000000 00000000  @.t.............
00000000117e715f: 00000000 00000000 8446cee0 ffffffff  ..........F.....
0000000002bd64d3: 00020000 00000000 1845deb0 ffff8880  ..........E.....
000000007003f0e2: 1845deb0 ffff8880 1845de58 ffff8880  ..E.....X.E.....
0000000011246e67: 8720c360 ffffffff 00000000 00000000  `. .............
00000000ae7abde4: 00000000 00000000 844f5140 ffffffff  ........@QO.....
000000005a7b7d10: 00030000 00000000 00000000 00000000  ................
000000000106de95: 00000000 00000000 00000000 00000000  ................
00000000a2804541: 8452b640 ffffffff 00000010 00000000  @.R.............
00000000f6dd8862: 00000000 00000000 00000000 dead4ead  .............N..
0000000053e409c8: ffffffff 00000000 ffffffff ffffffff  ................
00000000cd58c430: 8720c320 ffffffff 00000000 00000000   . .............
00000000b96d29ac: 00000000 00000000 844f5180 ffffffff  .........QO.....
000000009d2181ae: 00020000 00000000 1845df60 ffff8880  ........`.E.....
0000000040d7df51: 1845df60 ffff8880 00000000 00000000  `.E.............
00000000678cd795: 1845df78 ffff8880 1845df78 ffff8880  x.E.....x.E.....
000000004d9d6d3f: 00000000 00000000 1ed2ac1e 00000000  ................
0000000074a6ceaf: 00000000 00000000 00000000 00000000  ................
00000000e8b95dfc: 00000000 00000000 00000000 dead4ead  .............N..
00000000103cb93c: ffffffff 00000000 ffffffff ffffffff  ................
000000003a78ae8e: 872133c0 ffffffff 00000000 00000000  .3!.............
00000000892ec62b: 00000000 00000000 845353e0 ffffffff  .........SS.....
0000000089644559: 00020000 00000000 00000000 00000000  ................
00000000221f47d7: 00000000 00000000 00000000 ffff8880  ................
00000000914ba433: 1845e008 ffff8880 1845e008 ffff8880  ..E.......E.....
000000008dd7987c: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000f6847f2e: ffffffff ffffffff 87213380 ffffffff  .........3!.....
00000000529cc2d5: 00000000 00000000 00000000 00000000  ................
00000000def2c391: 84535420 ffffffff 00020000 ffffffff   TS.............
00000000e1cdaf36: 00000000 00000000 00000000 00000000  ................
00000000de07260f: 00000000 00000000 deaf1eed ffffffff  ................
0000000089d517ab: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
00000000a5cdbb90: 00000000 00000000 00000000 00000000  ................
0000000098cc1199: 84535460 ffffffff 00020000 00000000  `TS.............
00000000ab45bfb5: 1845e0a8 ffff8880 1845e0a8 ffff8880  ..E.......E.....
0000000058e8bde9: 00000000 00000000 00000000 ffffffff  ................
000000005564acfb: 00000000 dead4ead 00000000 00000000  .....N..........
00000000e2219973: 00000000 ffffffff 00000000 00000000  ................
00000000ec2b436e: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000064ac8b1c: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
00000000ae47d63c: 00000000 00000000 00000000 00000000  ................
00000000adb99d35: 845354e0 ffffffff 00020000 00000000  .TS.............
00000000efbe6b11: 1845e128 ffff8880 1845e128 ffff8880  (.E.....(.E.....
0000000015210837: ffffffe0 0000000f 1845e140 ffff8880  ........@.E.....
000000003113d4f7: 1845e140 ffff8880 81ace550 ffffffff  @.E.....P.......
00000000f7fea045: 87213280 ffffffff 00000000 00000000  .2!.............
000000000ff9a687: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000c0ca1183: 00000000 ffff8880 00000000 ffff8880  ................
00000000c997cd54: 00000000 dead4ead ffffffff ffffffff  .....N..........
000000002a4c8fb6: ffffffff ffffffff 87213300 ffffffff  .........3!.....
00000000fda61db6: 00000000 00000000 00000000 00000000  ................
000000003a112ada: 845354a0 ffffffff 00020000 00000000  .TS.............
000000009e0f4d12: 00000000 00000000 00000000 00000000  ................
000000006f460d5d: 00000000 00000000 00000000 00000000  ................
0000000043a575d0: 1845e1e8 00000000                    ..E.....
CPU: 0 PID: 836 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f44b7a6d227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffce6d74068 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f44b7adea14 RCX: 00007f44b7a6d227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffce6d74120
RBP: 00007ffce6d74120 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffce6d751a0
R13: 00007f44b7adea14 R14: 0000000000014129 R15: 00007ffce6d751e0
EXT4-fs (loop2): sb orphan head is 0
sb_info orphan list:
  inode loop2:16 at 00000000209002b6: mode 100755, nlink 2, next 0
------------[ cut here ]------------
kernel BUG at fs/ext4/super.c:1243!
invalid opcode: 0000 [#4] PREEMPT SMP KASAN NOPTI
CPU: 0 PID: 836 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88801283fd98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: ffffffff81b3ffad
RDX: ffff888010ddb400 RSI: ffffffff81b3fcef RDI: ffff88801845d988
RBP: ffff88800b7b4000 R08: 0000000000000042 R09: ffff88806ce2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800a994000
R13: ffff88801845dbd0 R14: ffff88800b7b4318 R15: ffff88800b7b4318
FS:  000055555596e500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afe53000 CR3: 000000000ffba000 CR4: 0000000000350ef0
Call Trace:
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f44b7a6d227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffce6d74068 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f44b7adea14 RCX: 00007f44b7a6d227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffce6d74120
RBP: 00007ffce6d74120 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffce6d751a0
R13: 00007f44b7adea14 R14: 0000000000014129 R15: 00007ffce6d751e0
Modules linked in:
---[ end trace a98080626cc4ab8b ]---
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  000055555596e500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fa82dac26f4 CR3: 000000000ffba000 CR4: 0000000000350ef0
----------------
Code disassembly (best guess), 3 bytes skipped:
   0:	ff f7                	push   %rdi
   2:	d8 64 89 01          	fsubs  0x1(%rcx,%rcx,4)
   6:	48 83 c8 ff          	or     $0xffffffffffffffff,%rax
   a:	c3                   	ret
   b:	0f 1f 44 00 00       	nopl   0x0(%rax,%rax,1)
  10:	31 f6                	xor    %esi,%esi
  12:	e9 09 00 00 00       	jmp    0x20
  17:	66 0f 1f 84 00 00 00 	nopw   0x0(%rax,%rax,1)
  1e:	00 00
  20:	b8 a6 00 00 00       	mov    $0xa6,%eax
  25:	0f 05                	syscall
* 27:	48 3d 00 f0 ff ff    	cmp    $0xfffffffffffff000,%rax <-- trapping instruction
  2d:	77 01                	ja     0x30
  2f:	c3                   	ret
  30:	48 c7 c2 a8 ff ff ff 	mov    $0xffffffffffffffa8,%rdx
  37:	f7 d8                	neg    %eax
  39:	64 89 02             	mov    %eax,%fs:(%rdx)
  3c:	b8                   	.byte 0xb8

final repro crashed as (corrupted=false):
0000000080280ba2: 8446cee0 ffffffff 00020000 00000000  ..F.............
00000000e81f81fd: 8720c360 ffffffff 00000000 00000000  `. .............
00000000b9b0671a: 00000000 00000000 844f5140 ffffffff  ........@QO.....
kernel BUG at fs/ext4/super.c:1243!
00000000bc982fcd: 00030000 00000000 00000000 00000000  ................
00000000f538aad4: 1845a9c0 ffff8880 1845a9c0 ffff8880  ..E.......E.....
0000000084a6e340: 00000000 00000000 00000000 00000000  ................
invalid opcode: 0000 [#1] PREEMPT SMP KASAN NOPTI
00000000697777f5: 8452b640 ffffffff 00000010 00000000  @.R.............
CPU: 1 PID: 834 Comm: syz-executor Not tainted 5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
000000005d6cfe7a: 00000000 00000000 00000000 dead4ead  .............N..
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
0000000095eed793: ffffffff 00000000 ffffffff ffffffff  ................
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
00000000a30df52a: 8720c320 ffffffff 00000000 00000000   . .............
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555556fde500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
00000000eeb288c6: 00000000 00000000 844f5180 ffffffff  .........QO.....
CR2: 00007fb8afde5020 CR3: 000000000ab38000 CR4: 0000000000350ee0
Call Trace:
000000006412706f: 00020000 00000000 18467310 ffff8880  .........sF.....
 generic_shutdown_super+0x142/0x370 fs/super.c:464
000000005062664f: 18467310 ffff8880 00000000 00000000  .sF.............
 kill_block_super+0x9d/0xf0 fs/super.c:1446
000000004d76d06c: 18467328 ffff8880 18467328 ffff8880  (sF.....(sF.....
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
00000000ef75665d: 00000000 00000000 1ed2ac1e 00000000  ................
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
000000007e533f92: 00000000 00000000 00000000 00000000  ................
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000a933804b: 00000000 00000000 00000000 dead4ead  .............N..
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f1bdbf21227
00000000ba74053e: ffffffff 00000000 ffffffff ffffffff  ................
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffe3d7fc2c8 EFLAGS: 00000246
00000000bd9d6456: 872133c0 ffffffff 00000000 00000000  .3!.............
 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f1bdbf92a14 RCX: 00007f1bdbf21227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffe3d7fc380
000000007a0fe568: 00000000 00000000 845353e0 ffffffff  .........SS.....
RBP: 00007ffe3d7fc380 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffe3d7fd400
R13: 00007f1bdbf92a14 R14: 0000000000013f44 R15: 00007ffe3d7fd440
00000000fafc1ae5: 00020000 00000000 00000000 00000000  ................
Modules linked in:
00000000f1f58e0f: 1845a968 ffff8880 872130c0 ffffffff  h.E......0!.....
00000000ea639cc7: 00000000 00000000 00000000 00000000  ................
000000002c1e49c4: 00000000 00000000 00000000 00000000  ................
000000007b10cab2: 184673b8 ffff8880 184673b8 ffff8880  .sF......sF.....
00000000eca903eb: 84535200 ffffffff 00030000 00000000  .RS.............
EXT4-fs (loop2): Ignoring removed oldalloc option
000000006f83724d: 00000000 00000000 00000000 00000000  ................
00000000253cc05d: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000a3c23436: 00000000 00000000 00000000 dead4ead  .............N..
000000009f88c827: ffffffff ffffffff 87213380 ffffffff  .........3!.....
0000000005603246: ffffffff 00000000 ffffffff ffffffff  ................
00000000e848899e: 86e8ef80 ffffffff 00000000 00000000  ................
000000004477654b: 84535420 ffffffff 00020000 00000000   TS.............
00000000b642f649: 00000000 00000000 00000000 00000000  ................
000000001fa328d0: 00000000 00000000 deaf1eed ffffffff  ................
0000000060dabbb1: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
000000003340a580: 86e81600 ffffffff 00000000 00000000  ................
0000000016615968: 84535460 ffffffff 00020000 00000000  `TS.............
00000000848c22ec: 18467458 ffff8880 18467458 ffff8880  XtF.....XtF.....
00000000db6c1dcf: 00000000 00000000 00000000 ffffffff  ................
00000000cb7bca41: 00000000 00000000 00000000 00000000  ................
000000008e55d56a: 00000000 00000000 00000000 00000000  ................
00000000d067593d: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000055790a66: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
00000000918853d3: 00000000 00000000 00000000 00000000  ................
00000000fffd6fa2: 845354e0 ffffffff 00020000 00000000  .TS.............
0000000034340160: 184674d8 ffff8880 184674d8 ffff8880  .tF......tF.....
000000002f7401a5: ffffffe0 0000000f 184674f0 ffff8880  .........tF.....
000000003756d582: 184674f0 ffff8880 81ace550 ffffffff  .tF.....P.......
0000000076483f00: 87213280 ffffffff 00000000 00000000  .2!.............
000000000fdb4348: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000c0c6f96a: 86749140 ffffffff 00000000 00000000  @.t.............
00000000343cb503: 00000000 00000000 00000000 00000000  ................
0000000006085d53: 00000000 00000000 8446cee0 ffffffff  ..........F.....
00000000f47015e5: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000f1d333b8: 00020000 ffffffff 1845aa58 ffff8880  ........X.E.....
000000006448ae8b: ffffffff ffffffff 87213300 ffffffff  .........3!.....
00000000bf96b5ce: 1845aa58 ffff8880 1845aa00 ffff8880  X.E.......E.....
00000000eedcf9fc: 00000000 00000000 00000000 00000000  ................
00000000e1930938: 87213080 ffffffff 00000000 00000000  .0!.............
000000009fa23392: 845354a0 ffffffff 00020000 00000000  .TS.............
0000000086b1a5bc: 00000000 00000000 00000000 00000000  ................
000000005bc5bc07: 00000000 00000000 84535240 ffffffff  ........@RS.....
[EXT4 FS bs=4096, gc=1, bpg=32768, ipg=32, mo=8842e028, mo2=0002]
000000004bf169e1: 00030000 00000000 000881ed 00000000  ................
EXT4-fs error (device loop2): ext4_mb_mark_diskspace_used:3233: comm syz.2.17: Allocating blocks 41-42 which overlap fs metadata
000000004e559077: 00000000 00000000 ffffffff ffffffff  ................
EXT4-fs (loop2): Remounting filesystem read-only
0000000064f71641: ffffffff ffffffff 84527840 ffffffff  ........@xR.....
Quota error (device loop2): write_blk: dquota write failed
0000000009c363f8: 0b78e000 ffff8880 1845acb0 ffff8880  ..x.......E.....
00000000ef6a69db: 00000000 00000000 00000000 00000000  ................
---[ end trace a98080626cc4ab88 ]---
00000000c7b6cd61: 00000000 00000000                    ........
CPU: 0 PID: 833 Comm: syz-executor Tainted: G      D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
000000004b381462: 104f8c38 ffff8880 00000010 00000000  8.O.............
Call Trace:
0000000052ceefed: 00000002 00000000 00002328 00000000  ........(#......
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
00000000177e5467: 637cf1f2 00000000 00000000 00000000  ..|c............
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191

 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
00000000e6d89a10: 637cf1f2 00000000 00000000 00000000  ..|c............
RIP: 0033:0x7fb78fed0227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
0000000033025100: 637cf1f2 00000000 00000000 00000000  ..|c............
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
00000000fa1050a5: 00000000 dead4ead ffffffff 00000000  .....N..........
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90
0000000015809a4d: ffffffff ffffffff 85321128 ffffffff  ........(.2.....
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
000000000d8e52cf: 86e81540 ffffffff 00000000 00000000  @...............
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
0000000024e92562: 844f5280 ffffffff 00020000 00000000  .RO.............
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
00000000e7fbef96: 000c0000 00000000 00000018 00000000  ................
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555556fde500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
0000000020d53c54: 00000060 00000000 00000000 00000000  `...............
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
0000000024176809: 00000000 00000000 00000000 00000000  ................
CR2: 00007fb8afdf0028 CR3: 000000000ab38000 CR4: 0000000000350ef0
Quota error (device loop2): qtree_write_dquot: Error -117 occurred while creating quota
00000000df29ab05: 00000000 dead4ead ffffffff 00000000  .....N..........
EXT4-fs (loop2): ext4_orphan_cleanup: truncating inode 16 to 9000 bytes
0000000026bbfbc2: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
EXT4-fs (loop2): 1 truncate cleaned up
000000008c3dab87: 00000000 00000000 00000000 00000000  ................
EXT4-fs (loop2): mounted filesystem without journal. Opts: oldalloc,noblock_validity,stripe=0x0000000000000006,barrier=0x000000007fff0038,errors=remount-ro,sysvgroups,resuid=0x000000000000ee00,resgid=0x000000000000ee01,barrier=0x00000000000041db2
00000000203b0dc1: 8446cee0 ffffffff 00020000 00000000  ..F.............
ext4 filesystem being mounted at /0/file0 supports timestamps until 2038 (0x7fffffff)
0000000069d5a958: 1845abd0 ffff8880 1845abd0 ffff8880  ..E.......E.....
000000009e1592ad: 1845ab78 ffff8880 85321138 ffffffff  x.E.....8.2.....
EXT4-fs (loop2): Inode 16 (00000000757d498c): orphan list check failed!
0000000072207fdc: 86e8b8c0 ffffffff 00000000 00000000  ................
00000000757d498c: 0001f30a 00000004 00000000 00000002  ................
0000000060726d34: 844f52c0 ffffffff 00030000 00000000  .RO.............
0000000084f75127: 00000003 00000025 00000002 00000001  ....%...........
000000005f9b243a: 00000000 00000000 00000000 00000000  ................
00000000d85ea74e: 00000027 00000002 00008001 00000027  '...........'...
00000000537f2da7: 00000000 00000000 00000000 00000000  ................
EXT4-fs (loop3): sb orphan head is 0
00000000e3cfd398: 1845ac30 ffff8880 1845ac30 ffff8880  0.E.....0.E.....
sb_info orphan list:
==================================================================
00000000a4246544: 1845ac40 ffff8880 1845ac40 ffff8880  @.E.....@.E.....
BUG: KASAN: use-after-free in dump_orphan_list fs/ext4/super.c:1135 [inline]
BUG: KASAN: use-after-free in ext4_put_super+0x1119/0x11b0 fs/ext4/super.c:1242
Read of size 4 at addr ffff888018466c84 by task syz-executor/833

CPU: 0 PID: 833 Comm: syz-executor Tainted: G      D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 print_address_description.constprop.0+0x1c/0x210 mm/kasan/report.c:385
00000000529e1435: 1845ac50 ffff8880 1845ac50 ffff8880  P.E.....P.E.....
 __kasan_report mm/kasan/report.c:545 [inline]
 kasan_report.cold+0x37/0x7c mm/kasan/report.c:562
00000000c74d722a: 1845ac60 ffff8880 1845ac60 ffff8880  `.E.....`.E.....
000000003f955680: 00000000 00000000 00000000 00000000  ................
 dump_orphan_list fs/ext4/super.c:1135 [inline]
 ext4_put_super+0x1119/0x11b0 fs/ext4/super.c:1242
000000004dedbaba: 00000003 00000000 00000000 00000000  ................
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
000000003f94ef58: 00000000 00000000 00000000 00000000  ................
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
00000000df37d9c5: 84527920 ffffffff 00000000 00000000   yR.............
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000aff51234: 1845aa98 ffff8880 00000000 dead4ead  ..E..........N..
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7fb78fed0227
00000000658b816e: ffffffff 00000000 ffffffff ffffffff  ................
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
00000000d5a8ddf1: 8720c2e0 ffffffff 86e79d40 ffffffff  .. .....@.......
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
000000007911afce: 00000000 00000000 844f5100 ffffffff  .........QO.....
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
0000000048ba061a: 00020000 00000000 00000021 00000000  ........!.......
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90

Allocated by task 2645:
0000000006ef48f9: 00000000 00000000 00100cca 00000000  ................
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
 kasan_set_track mm/kasan/common.c:56 [inline]
 __kasan_kmalloc.constprop.0+0xc2/0xd0 mm/kasan/common.c:461
00000000337a0d6d: 00000000 00000000 00000000 00000000  ................
 slab_post_alloc_hook mm/slab.h:535 [inline]
 slab_alloc_node mm/slub.c:2891 [inline]
 slab_alloc mm/slub.c:2899 [inline]
 kmem_cache_alloc+0x145/0x330 mm/slub.c:2904
 ext4_alloc_inode+0x1a/0x630 fs/ext4/super.c:1294
 alloc_inode+0x63/0x230 fs/inode.c:234
000000005843466f: 00000000 00000000 00000000 00000000  ................
 iget_locked+0x1c6/0x610 fs/inode.c:1195
 __ext4_iget+0x27c/0x4180 fs/ext4/inode.c:4619
 ext4_orphan_get+0x284/0x6f0 fs/ext4/ialloc.c:1385
00000000e7cb6d48: 00000000 00000000 00000000 dead4ead  .............N..
 ext4_orphan_cleanup fs/ext4/super.c:3088 [inline]
 ext4_fill_super+0x90de/0xd960 fs/ext4/super.c:5067
 mount_bdev+0x350/0x410 fs/super.c:1419
 legacy_get_tree+0x105/0x220 fs/fs_context.c:592
0000000019e9770a: ffffffff 00000000 ffffffff ffffffff  ................
 vfs_get_tree+0x8e/0x360 fs/super.c:1549
 do_new_mount fs/namespace.c:2875 [inline]
 path_mount+0x1318/0x2060 fs/namespace.c:3205
 do_mount fs/namespace.c:3218 [inline]
 __do_sys_mount fs/namespace.c:3426 [inline]
 __se_sys_mount fs/namespace.c:3403 [inline]
 __x64_sys_mount+0x27e/0x300 fs/namespace.c:3403
0000000031e677f2: 86749140 ffffffff 00000000 00000000  @.t.............
 do_syscall_64+0x33/0x40 arch/x86/entry/common.c:46
 entry_SYSCALL_64_after_hwframe+0x44/0xa9

000000005d815142: 00000000 00000000 8446cee0 ffffffff  ..........F.....
Freed by task 9:
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
 kasan_set_track+0x1c/0x30 mm/kasan/common.c:56
0000000050cbf19d: 00020000 00000000 1845ad78 ffff8880  ........x.E.....
 kasan_set_free_info+0x1b/0x30 mm/kasan/generic.c:355
 __kasan_slab_free+0x110/0x150 mm/kasan/common.c:422
 slab_free_hook mm/slub.c:1544 [inline]
 slab_free_freelist_hook+0x53/0x130 mm/slub.c:1577
0000000019e36fff: 1845ad78 ffff8880 1845ad20 ffff8880  x.E..... .E.....
 slab_free mm/slub.c:3142 [inline]
 kmem_cache_free+0x97/0x340 mm/slub.c:3158
 i_callback+0x42/0x70 fs/inode.c:223
 rcu_do_batch+0x496/0x1440 kernel/rcu/tree.c:2476
 rcu_core+0x62d/0x9d0 kernel/rcu/tree.c:2711
0000000031a84ab3: 8720c360 ffffffff 00000000 00000000  `. .............
 __do_softirq+0x295/0xa3f kernel/softirq.c:298

Last call_rcu():
 kasan_save_stack+0x1b/0x40 mm/kasan/common.c:48
00000000cb3f74d6: 00000000 00000000 844f5140 ffffffff  ........@QO.....
 kasan_record_aux_stack+0x9e/0xb0 mm/kasan/generic.c:346
 __call_rcu kernel/rcu/tree.c:2953 [inline]
 call_rcu+0xe6/0x13b0 kernel/rcu/tree.c:3027
 destroy_inode+0x12f/0x1c0 fs/inode.c:289
00000000e56e2a80: 00030000 00000000 00000000 00000000  ................
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
000000008af169f3: 00000000 00000000 00000000 00000000  ................
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
00000000701f69ac: 8452b640 ffffffff 00000010 00000000  @.R.............
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
00000000799c30d5: 00000000 00000000 00000000 dead4ead  .............N..
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
00000000b4536591: ffffffff 00000000 ffffffff ffffffff  ................
 entry_SYSCALL_64_after_hwframe+0x44/0xa9

0000000048955ed7: 8720c320 ffffffff 00000000 00000000   . .............
The buggy address belongs to the object at ffff888018466c48
 which belongs to the cache ext4_inode_cache of size 2392
The buggy address is located 60 bytes inside of
 2392-byte region [ffff888018466c48, ffff8880184675a0)
The buggy address belongs to the page:
0000000036ca8c0d: 00000000 00000000 844f5180 ffffffff  .........QO.....
page:000000001ae11191 refcount:1 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0x18460
000000000ba529d8: 00020000 00000000 1845ae28 ffff8880  ........(.E.....
head:000000001ae11191 order:3 compound_mapcount:0 compound_pincount:0
flags: 0x100000000010200(slab|head)
raw: 0100000000010200 dead000000000100 dead000000000122 ffff88800a8d1500
00000000aa4f8402: 1845ae28 ffff8880 00000000 00000000  (.E.............
raw: 0000000000000000 00000000800d000d 00000001ffffffff ffff888010489f01
000000003955e30b: 1845ae40 ffff8880 1845ae40 ffff8880  @.E.....@.E.....
page dumped because: kasan: bad access detected
page->mem_cgroup:ffff888010489f01

Memory state around the buggy address:
 ffff888018466b80: fb fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc
000000001882826d: 00000000 00000000 1ed2ac1e 00000000  ................
 ffff888018466c00: fc fc fc fc fc fc fc fc fc fa fb fb fb fb fb fb
0000000033671857: 00000000 00000000 00000000 00000000  ................
>ffff888018466c80: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
00000000de1c34bf: 00000000 00000000 00000000 dead4ead  .............N..
                   ^
00000000971177b8: ffffffff 00000000 ffffffff ffffffff  ................
 ffff888018466d00: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
000000009568878d: 872133c0 ffffffff 00000000 00000000  .3!.............
 ffff888018466d80: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
==================================================================
00000000ffcaf4e2: 00000000 00000000 00000000 00000000  ................
000000002af28991: 00000000 00000000 845353e0 ffffffff  .........SS.....
00000000557c5d49: 00020000 00000000 00000000 00000000  ................
00000000f894b2cb: 00000000 00000000 00000000 9080008e  ................
00000000beea75bc: 00000000 00000000 00000000 00000000  ................
0000000026819dd0: 1845aed0 ffff8880 1845aed0 ffff8880  ..E.......E.....
00000000ec617a04: 00080000 00000000 00000000 00000000  ................
000000004960228a: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000fa0e9272: 00000000 00000000 00000000 00000000  ................
00000000fc6bf12d: ffffffff ffffffff 87213380 ffffffff  .........3!.....
000000001f6391d1: 00000000 dead4ead ffffffff dead4ead  .....N.......N..
0000000022601077: 86e8ef80 ffffffff 00000000 00000000  ................
00000000821bad9b: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
00000000abead20b: 84535420 ffffffff 00020000 00000000   TS.............
000000005ebd4b58: 00000000 00000000 00000000 00000000  ................
00000000cd0593a2: 00000000 00000000 00000000 00000000  ................
00000000654308cd: 00000000 00000000 deaf1eed ffffffff  ................
00000000ba41e3ce: 8446cee0 ffffffff 00020000 ffffffff  ..F.............
00000000b6c01f86: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
00000000269518f1: 1845d948 ffff8880 1845d948 ffff8880  H.E.....H.E.....
0000000006398953: 86e81600 ffffffff 00000000 00000000  ................
00000000639cf81b: 1845d8f0 ffff8880 87213100 ffffffff  ..E......1!.....
000000001e0b03ec: 84535460 ffffffff 00020000 00000000  `TS.............
00000000b232574a: 00000000 00000000 00000000 00000000  ................
00000000ac9e4c1e: 1845af70 ffff8880 1845af70 ffff8880  p.E.....p.E.....
000000004c22a9c3: 845351c0 ffffffff 00030000 00000000  .QS.............
00000000e49d6974: 00000000 00000000 00000000 ffffffff  ................
000000005c6b29e4: 0b7b4318 ffff8880 0b7b4318 ffff8880  .C{......C{.....
00000000a3c273fe: 00000000 ffffffff 00000000 00000000  ................
00000000d6322d67: 1845d998 ffff8880 1845d998 ffff8880  ..E.......E.....
00000000ea5f8f4c: 00000000 00000000 00000000 00000000  ................
0000000076094d98: 00000000 00000000 00000000 00000000  ................
00000000c133f1be: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000743d3bbc: 00000000 dead4ead ffffffff ffff8880  .....N..........
000000003bf7d32d: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
000000009affc44f: 00000000 00000000 00000000 00000000  ................
0000000015703eea: 845354e0 ffffffff 00020000 00000000  .TS.............
000000009d2f8939: 1845aff0 ffff8880 1845aff0 ffff8880  ..E.......E.....
00000000051e680e: ffffffe0 0000000f 1845b008 ffff8880  ..........E.....
00000000a61d14c0: ffffffff ffffffff 87214580 ffffffff  .........E!.....
0000000049d58a5c: 00000000 00000000 00000000 00000000  ................
0000000013e52836: 1845b008 ffff8880 81ace550 ffffffff  ..E.....P.......
000000008fe1c580: 84545900 ffffffff 00020000 00000000  .YT.............
00000000e2ea6c5e: 87213280 ffffffff 00000000 00000000  .2!.............
000000002ba06e36: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000dd738acd: 00000000 00000000 00000000 00000000  ................
00000000447a1d97: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000be987cf6: ffffffff ffffffff 87213300 ffffffff  .........3!.....
000000006d939fc9: 1845d9f8 ffff8880 1845d9f8 ffff8880  ..E.......E.....
0000000089bea09e: 00000000 00000000 00000000 00000000  ................
0000000077005ba8: 845354a0 ffffffff 00020000 dead4ead  .TS..........N..
00000000c97481f2: 00000000 00000000 00000000 dead4ead  .............N..
00000000637c6e1f: ffffffff 00000000 ffffffff ffffffff  ................
00000000a2aff007: 00000000 00000000 00000000 00000000  ................
00000000f4d745c9: 86749100 ffffffff 00000000 00000000  ..t.............
0000000039fade53: 00000000 00000000 00000000 00000000  ................
0000000035107729: 00000000 00000000                    ........
CPU: 1 PID: 823 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
000000004868a7ad: 00000000 00000000 8446cb00 ffffffff  ..........F.....
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
  inode loop3:16 at 0000000044cb9b05: mode 100755, nlink 2, next 0
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
------------[ cut here ]------------
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
kernel BUG at fs/ext4/super.c:1243!
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
invalid opcode: 0000 [#2] PREEMPT SMP KASAN NOPTI
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
CPU: 0 PID: 833 Comm: syz-executor Tainted: G    B D           5.10.0 #1
RIP: 0033:0x7fd0d9d68227
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 002b:00007ffca3f95ad8 EFLAGS: 00000246
RSP: 0018:ffff888010d5fd98 EFLAGS: 00010293
 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fd0d9dd9a14 RCX: 00007fd0d9d68227
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: ffffffff81b3ffad
RDX: ffff88802064ce00 RSI: ffffffff81b3fcef RDI: ffff888018466d38
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffca3f95b90
RBP: 00007ffca3f95b90 R08: 0000000000000000 R09: 0000000000000000
RBP: ffff88800c2c2000 R08: 0000000000000042 R09: ffff88806ce2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800c2c0000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffca3f96c10
R13: 00007fd0d9dd9a14 R14: 000000000001402f R15: 00007ffca3f96c50
R13: ffff888018466f80 R14: ffff88800c2c2318 R15: ffff88800c2c2318
00000000c5a10ef1: 00020000 00000000 00000000 00000000  ................
FS:  000055555663a500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afe27010 CR3: 000000001f57a000 CR4: 0000000000350ef0
Call Trace:
0000000016d7a676: 1845da58 ffff8880 1845da58 ffff8880  X.E.....X.E.....
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
00000000b0b27111: 1845da08 ffff8880 87213240 ffffffff  ..E.....@2!.....
 deactivate_locked_super+0x95/0x110 fs/super.c:335
00000000b80e8e0e: 00000000 00000000 00000000 00000000  ................
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
00000000a2b6d56b: 84535580 ffffffff 00030000 ffffffff  .US.............
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
000000007664b558: 00002328 00000000 00000000 00000000  (#..............
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7fb78fed0227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
00000000a04f61a3: 00000000 00000000 00000000 ffffffff  ................
RSP: 002b:00007ffcd8cc1918 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
00000000e9ba8e92: 00000000 dead4ead ffffffff ffff8880  .....N..........
RAX: 0000000000000000 RBX: 00007fb78ff41a14 RCX: 00007fb78fed0227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffcd8cc19d0
000000004993ae39: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
RBP: 00007ffcd8cc19d0 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffcd8cc2a50
000000006cd1ca6d: 00000000 00000000 00000000 00000000  ................
R13: 00007fb78ff41a14 R14: 0000000000014024 R15: 00007ffcd8cc2a90
Modules linked in:
---[ end trace a98080626cc4ab89 ]---
EXT4-fs (loop0): sb orphan head is 0
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
sb_info orphan list:
  inode loop0:16 at 00000000eb4f1d2f: mode 100755, nlink 2, next 0
------------[ cut here ]------------
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
kernel BUG at fs/ext4/super.c:1243!
invalid opcode: 0000 [#3] PREEMPT SMP KASAN NOPTI
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
CPU: 1 PID: 823 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243

Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88801f0b7d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RDX: ffff88801e660000 RSI: ffffffff81b3fcef RDI: ffffed1003e16fa4
RBP: ffff888021470000 R08: 0000000000000042 R09: ffff88806cf1ff9b
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800b78e000
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
R13: ffff88801845aa98 R14: ffff888021470318 R15: ffff888021470318
FS:  0000555555bbf500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afdaa250 CR3: 0000000008be2000 CR4: 0000000000350ee0
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
Call Trace:
 generic_shutdown_super+0x142/0x370 fs/super.c:464
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
FS:  000055555663a500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
CR2: 00007fb8afe27010 CR3: 000000001f57a000 CR4: 0000000000350ef0
RIP: 0033:0x7fd0d9d68227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
0000000046f41690: 8446cee0 ffffffff 00020000 00000000  ..F.............
RSP: 002b:00007ffca3f95ad8 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007fd0d9dd9a14 RCX: 00007fd0d9d68227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffca3f95b90
00000000dfe34ce4: 1845daf8 ffff8880 1845daf8 ffff8880  ..E.......E.....
RBP: 00007ffca3f95b90 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffca3f96c10
R13: 00007fd0d9dd9a14 R14: 000000000001402f R15: 00007ffca3f96c50
00000000fe5ccf10: 1845daa0 ffff8880 872130c0 ffffffff  ..E......0!.....
Modules linked in:
---[ end trace a98080626cc4ab8a ]---
000000001e5c0e33: 00000000 00000000 00000000 00000000  ................
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
000000006bd1bdcf: 84535200 ffffffff 00030000 ffff8880  .RS.............
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
0000000046f248dd: 00000000 00000000 00000000 00000000  ................
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
00000000c1ce71a6: 00000000 00000000 00000000 dead4ead  .............N..

00000000d6669ab0: ffffffff 00000000 ffffffff ffffffff  ................
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
0000000063bb096c: 86749140 ffffffff 00000000 00000000  @.t.............
0000000085d24a0c: 00000000 00000000 8446cee0 ffffffff  ..........F.....
00000000e3e9f5f9: 00020000 dead4ead 1845db90 ffff8880  .....N....E.....
000000006d062857: 1845db90 ffff8880 1845db38 ffff8880  ..E.....8.E.....
000000004485c5f9: 87213080 ffffffff 00000000 00000000  .0!.............
00000000d6653799: 00000000 00000000 84535240 ffffffff  ........@RS.....
000000005c96a0c9: 00030000 00000000 000881ed 00000000  ................
0000000075256f18: 00000000 00000000 ffffffff ffffffff  ................
0000000035ab4672: ffffffff ffffffff 84527840 ffffffff  ........@xR.....
00000000c531253f: 0a994000 ffff8880 1845dde8 ffff8880  .@........E.....
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
00000000c4443fe1: 0bd858a0 ffff8880 00000010 00000000  .X..............
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
00000000196d00d7: 00000002 00000000 00002328 00000000  ........(#......
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  0000555555bbf500(0000) GS:ffff88806cf00000(0000) knlGS:0000000000000000
0000000026266de6: 637cf1f2 00000000 00000000 00000000  ..|c............
00000000ac561f4c: 637cf1f2 00000000 00000000 00000000  ..|c............
00000000a4a9af8d: 637cf1f2 00000000 00000000 00000000  ..|c............
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f79a18676f4 CR3: 0000000008be2000 CR4: 0000000000350ee0
00000000091a14a7: 00000000 dead4ead ffffffff 00000000  .....N..........
000000009f381fea: ffffffff ffffffff 85321128 ffffffff  ........(.2.....
000000008900f91b: 00000000 00000000 00000000 00000000  ................
0000000021b49270: 844f5280 ffffffff 00020000 00000000  .RO.............
0000000032e82a09: 000c0000 00000000 00000018 00000000  ................
0000000008a42701: 00000060 00000000 00000000 00000000  `...............
0000000024fc4387: 00000000 00000000 00000000 00000000  ................
0000000038f2ec87: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000054f7b34c: ffffffff ffffffff 86749140 ffffffff  ........@.t.....
00000000453e63f5: 00000000 00000000 00000000 00000000  ................
0000000029baedc6: 8446cee0 ffffffff 00020000 00000000  ..F.............
0000000090d49eb3: 1845dd08 ffff8880 1845dd08 ffff8880  ..E.......E.....
00000000301e149f: 1845dcb0 ffff8880 85321138 ffffffff  ..E.....8.2.....
00000000c25bc8b4: 00000000 00000000 00000000 00000000  ................
00000000dfe77b1b: 844f52c0 ffffffff 00030000 00000000  .RO.............
00000000324d1cb6: 00000000 00000000 00000000 00000000  ................
00000000c9de1561: 00000000 00000000 00000000 00000000  ................
00000000d863e450: 1845dd68 ffff8880 1845dd68 ffff8880  h.E.....h.E.....
00000000e1ca302c: 1845dd78 ffff8880 1845dd78 ffff8880  x.E.....x.E.....
00000000c80398b0: 1845dd88 ffff8880 1845dd88 ffff8880  ..E.......E.....
00000000033ab707: 1845dd98 ffff8880 1845dd98 ffff8880  ..E.......E.....
000000003c3d3875: 00000000 00000000 00000000 00000000  ................
000000008b0cd5d0: 00000003 00000000 00000000 00000000  ................
0000000010b7e4a8: 00000000 00000000 00000000 00000000  ................
00000000d3c3d488: 84527920 ffffffff 00000000 00000000   yR.............
00000000cb1efa25: 1845dbd0 ffff8880 00000000 dead4ead  ..E..........N..
000000008aa6d841: ffffffff 00000000 ffffffff ffffffff  ................
000000007c4bb1fd: 8720c2e0 ffffffff 00000000 00000000  .. .............
00000000703fdff2: 00000000 00000000 844f5100 ffffffff  .........QO.....
000000007184f12d: 00020000 00000000 00000021 00000000  ........!.......
0000000051faffcb: 00000000 00000000 00100cca 00000000  ................
000000001d587dc4: 00000000 00000000 00000000 00000000  ................
0000000057165b58: 00000000 00000000 00000000 00000000  ................
00000000b1ece1e0: 00000000 00000000 00000000 dead4ead  .............N..
00000000581a821a: ffffffff 00000000 ffffffff ffffffff  ................
00000000e2400f8a: 86749140 ffffffff 00000000 00000000  @.t.............
00000000117e715f: 00000000 00000000 8446cee0 ffffffff  ..........F.....
0000000002bd64d3: 00020000 00000000 1845deb0 ffff8880  ..........E.....
000000007003f0e2: 1845deb0 ffff8880 1845de58 ffff8880  ..E.....X.E.....
0000000011246e67: 8720c360 ffffffff 00000000 00000000  `. .............
00000000ae7abde4: 00000000 00000000 844f5140 ffffffff  ........@QO.....
000000005a7b7d10: 00030000 00000000 00000000 00000000  ................
000000000106de95: 00000000 00000000 00000000 00000000  ................
00000000a2804541: 8452b640 ffffffff 00000010 00000000  @.R.............
00000000f6dd8862: 00000000 00000000 00000000 dead4ead  .............N..
0000000053e409c8: ffffffff 00000000 ffffffff ffffffff  ................
00000000cd58c430: 8720c320 ffffffff 00000000 00000000   . .............
00000000b96d29ac: 00000000 00000000 844f5180 ffffffff  .........QO.....
000000009d2181ae: 00020000 00000000 1845df60 ffff8880  ........`.E.....
0000000040d7df51: 1845df60 ffff8880 00000000 00000000  `.E.............
00000000678cd795: 1845df78 ffff8880 1845df78 ffff8880  x.E.....x.E.....
000000004d9d6d3f: 00000000 00000000 1ed2ac1e 00000000  ................
0000000074a6ceaf: 00000000 00000000 00000000 00000000  ................
00000000e8b95dfc: 00000000 00000000 00000000 dead4ead  .............N..
00000000103cb93c: ffffffff 00000000 ffffffff ffffffff  ................
000000003a78ae8e: 872133c0 ffffffff 00000000 00000000  .3!.............
00000000892ec62b: 00000000 00000000 845353e0 ffffffff  .........SS.....
0000000089644559: 00020000 00000000 00000000 00000000  ................
00000000221f47d7: 00000000 00000000 00000000 ffff8880  ................
00000000914ba433: 1845e008 ffff8880 1845e008 ffff8880  ..E.......E.....
000000008dd7987c: 00000000 dead4ead ffffffff 00000000  .....N..........
00000000f6847f2e: ffffffff ffffffff 87213380 ffffffff  .........3!.....
00000000529cc2d5: 00000000 00000000 00000000 00000000  ................
00000000def2c391: 84535420 ffffffff 00020000 ffffffff   TS.............
00000000e1cdaf36: 00000000 00000000 00000000 00000000  ................
00000000de07260f: 00000000 00000000 deaf1eed ffffffff  ................
0000000089d517ab: ffffffff ffffffff 87213340 ffffffff  ........@3!.....
00000000a5cdbb90: 00000000 00000000 00000000 00000000  ................
0000000098cc1199: 84535460 ffffffff 00020000 00000000  `TS.............
00000000ab45bfb5: 1845e0a8 ffff8880 1845e0a8 ffff8880  ..E.......E.....
0000000058e8bde9: 00000000 00000000 00000000 ffffffff  ................
000000005564acfb: 00000000 dead4ead 00000000 00000000  .....N..........
00000000e2219973: 00000000 ffffffff 00000000 00000000  ................
00000000ec2b436e: 00000000 dead4ead ffffffff 00000000  .....N..........
0000000064ac8b1c: ffffffff ffffffff 872132c0 ffffffff  .........2!.....
00000000ae47d63c: 00000000 00000000 00000000 00000000  ................
00000000adb99d35: 845354e0 ffffffff 00020000 00000000  .TS.............
00000000efbe6b11: 1845e128 ffff8880 1845e128 ffff8880  (.E.....(.E.....
0000000015210837: ffffffe0 0000000f 1845e140 ffff8880  ........@.E.....
000000003113d4f7: 1845e140 ffff8880 81ace550 ffffffff  @.E.....P.......
00000000f7fea045: 87213280 ffffffff 00000000 00000000  .2!.............
000000000ff9a687: 00000000 00000000 84535520 ffffffff  ........ US.....
00000000c0ca1183: 00000000 ffff8880 00000000 ffff8880  ................
00000000c997cd54: 00000000 dead4ead ffffffff ffffffff  .....N..........
000000002a4c8fb6: ffffffff ffffffff 87213300 ffffffff  .........3!.....
00000000fda61db6: 00000000 00000000 00000000 00000000  ................
000000003a112ada: 845354a0 ffffffff 00020000 00000000  .TS.............
000000009e0f4d12: 00000000 00000000 00000000 00000000  ................
000000006f460d5d: 00000000 00000000 00000000 00000000  ................
0000000043a575d0: 1845e1e8 00000000                    ..E.....
CPU: 0 PID: 836 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x107/0x163 lib/dump_stack.c:118
 ext4_destroy_inode fs/ext4/super.c:1358 [inline]
 ext4_destroy_inode+0xdc/0x100 fs/ext4/super.c:1349
 destroy_inode+0xc6/0x1c0 fs/inode.c:284
 dispose_list fs/inode.c:613 [inline]
 evict_inodes+0x3c1/0x5e0 fs/inode.c:663
 generic_shutdown_super+0xa6/0x370 fs/super.c:454
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f44b7a6d227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffce6d74068 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f44b7adea14 RCX: 00007f44b7a6d227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffce6d74120
RBP: 00007ffce6d74120 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffce6d751a0
R13: 00007f44b7adea14 R14: 0000000000014129 R15: 00007ffce6d751e0
EXT4-fs (loop2): sb orphan head is 0
sb_info orphan list:
  inode loop2:16 at 00000000209002b6: mode 100755, nlink 2, next 0
------------[ cut here ]------------
kernel BUG at fs/ext4/super.c:1243!
invalid opcode: 0000 [#4] PREEMPT SMP KASAN NOPTI
CPU: 0 PID: 836 Comm: syz-executor Tainted: G    B D           5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88801283fd98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: ffffffff81b3ffad
RDX: ffff888010ddb400 RSI: ffffffff81b3fcef RDI: ffff88801845d988
RBP: ffff88800b7b4000 R08: 0000000000000042 R09: ffff88806ce2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800a994000
R13: ffff88801845dbd0 R14: ffff88800b7b4318 R15: ffff88800b7b4318
FS:  000055555596e500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fb8afe53000 CR3: 000000000ffba000 CR4: 0000000000350ef0
Call Trace:
 generic_shutdown_super+0x142/0x370 fs/super.c:464
 kill_block_super+0x9d/0xf0 fs/super.c:1446
 deactivate_locked_super+0x95/0x110 fs/super.c:335
 deactivate_super+0xad/0xd0 fs/super.c:366
 cleanup_mnt+0x3c8/0x580 fs/namespace.c:1118
 task_work_run+0xe2/0x1a0 kernel/task_work.c:151
 tracehook_notify_resume include/linux/tracehook.h:188 [inline]
 exit_to_user_mode_loop kernel/entry/common.c:164 [inline]
 exit_to_user_mode_prepare+0x155/0x160 kernel/entry/common.c:191
 syscall_exit_to_user_mode+0x3d/0x270 kernel/entry/common.c:266
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f44b7a6d227
Code: a8 ff ff ff f7 d8 64 89 01 48 83 c8 ff c3 0f 1f 44 00 00 31 f6 e9 09 00 00 00 66 0f 1f 84 00 00 00 00 00 b8 a6 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 01 c3 48 c7 c2 a8 ff ff ff f7 d8 64 89 02 b8
RSP: 002b:00007ffce6d74068 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 00007f44b7adea14 RCX: 00007f44b7a6d227
RDX: 0000000000000000 RSI: 0000000000000009 RDI: 00007ffce6d74120
RBP: 00007ffce6d74120 R08: 0000000000000000 R09: 0000000000000000
R10: 00000000ffffffff R11: 0000000000000246 R12: 00007ffce6d751a0
R13: 00007f44b7adea14 R14: 0000000000014129 R15: 00007ffce6d751e0
Modules linked in:
---[ end trace a98080626cc4ab8b ]---
RIP: 0010:ext4_put_super+0xe1f/0x11b0 fs/ext4/super.c:1243
Code: 6c 24 50 e8 33 ca 81 ff 4c 89 e7 e8 4b d3 ea ff 4c 89 e7 e8 43 cb f5 ff 4c 89 e7 e8 6b 8b ec ff e9 1d fe ff ff e8 d1 11 92 ff <0f> 0b 48 c7 c7 40 d1 31 85 e8 d2 8e 2c 02 48 8b 7c 24 10 e8 09 42
RSP: 0018:ffff88800c307d98 EFLAGS: 00010293
RAX: 0000000000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RDX: ffff888010dd8000 RSI: ffffffff81b3fcef RDI: ffffed1001860fa4
RBP: ffff8880090c6000 R08: 0000000000000042 R09: ffff88806cf2fc0f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800de1a000
R13: ffff88801846f958 R14: ffff8880090c6318 R15: ffff8880090c6318
FS:  000055555596e500(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fa82dac26f4 CR3: 000000000ffba000 CR4: 0000000000350ef0
----------------
Code disassembly (best guess), 3 bytes skipped:
   0:	ff f7                	push   %rdi
   2:	d8 64 89 01          	fsubs  0x1(%rcx,%rcx,4)
   6:	48 83 c8 ff          	or     $0xffffffffffffffff,%rax
   a:	c3                   	ret
   b:	0f 1f 44 00 00       	nopl   0x0(%rax,%rax,1)
  10:	31 f6                	xor    %esi,%esi
  12:	e9 09 00 00 00       	jmp    0x20
  17:	66 0f 1f 84 00 00 00 	nopw   0x0(%rax,%rax,1)
  1e:	00 00
  20:	b8 a6 00 00 00       	mov    $0xa6,%eax
  25:	0f 05                	syscall
* 27:	48 3d 00 f0 ff ff    	cmp    $0xfffffffffffff000,%rax <-- trapping instruction
  2d:	77 01                	ja     0x30
  2f:	c3                   	ret
  30:	48 c7 c2 a8 ff ff ff 	mov    $0xffffffffffffffa8,%rdx
  37:	f7 d8                	neg    %eax
  39:	64 89 02             	mov    %eax,%fs:(%rdx)
  3c:	b8                   	.byte 0xb8

