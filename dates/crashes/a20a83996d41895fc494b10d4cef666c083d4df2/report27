EXT4-fs error (device loop3): ext4_find_dest_de:1947: inode #2: block 255: comm syz.3.246: bad entry in directory: directory entry overrun - offset=264, inode=19, rec_len=760, name_len=3, size=1012
EXT4-fs (loop0): 1 truncate cleaned up
EXT4-fs (loop0): mounted filesystem without journal. Opts: ,errors=continue
------------[ cut here ]------------
kernel BUG at fs/ext4/inode.c:5121!
invalid opcode: 0000 [#1] PREEMPT SMP KASAN NOPTI
CPU: 0 PID: 6673 Comm: syz.3.246 Not tainted 5.10.0 #1
Hardware name: QEMU Ubuntu 24.04 PC (i440FX + PIIX, 1996), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:ext4_do_update_inode fs/ext4/inode.c:5121 [inline]
RIP: 0010:ext4_mark_iloc_dirty+0x276e/0x3710 fs/ext4/inode.c:5712
Code: fd ff ff e9 49 e8 ff ff e8 4f da 9f ff 44 8b 74 24 48 31 ff 44 89 f6 e8 00 d2 9f ff 45 85 f6 0f 84 04 f1 ff ff e8 32 da 9f ff <0f> 0b 48 c7 c7 60 de 2f 85 e8 33 57 3a 02 e8 1f da 9f ff 48 8d 85
RSP: 0018:ffff88800f9e7a68 EFLAGS: 00010212
RAX: 0000000000001095 RBX: ffff88801a58ef80 RCX: ffffc900018e9000
RDX: 0000000000040000 RSI: ffffffff81a6348e RDI: 0000000000000005
RBP: ffff88802a215500 R08: 0000000000000000 R09: ffff88801a58f16f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800bcc2000
R13: 0000000000000000 R14: 00000000ffffffff R15: ffff88800f9e7b98
FS:  00007f25251a36c0(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fe35d6156f4 CR3: 000000000b08c000 CR4: 0000000000350ef0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000600
Call Trace:
 __ext4_mark_inode_dirty+0x201/0x860 fs/ext4/inode.c:5906
 __ext4_unlink+0x6f7/0xa40 fs/ext4/namei.c:3226
 ext4_unlink+0x323/0x8f0 fs/ext4/namei.c:3274
 vfs_unlink+0x2d0/0x610 fs/namei.c:3833
 do_unlinkat+0x39b/0x650 fs/namei.c:3897
 do_syscall_64+0x33/0x40 arch/x86/entry/common.c:46
 entry_SYSCALL_64_after_hwframe+0x44/0xa9
RIP: 0033:0x7f2526529ef9
Code: ff ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 40 00 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007f25251a3038 EFLAGS: 00000246 ORIG_RAX: 0000000000000057
RAX: ffffffffffffffda RBX: 00007f25266e1f80 RCX: 00007f2526529ef9
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000020000680
RBP: 00007f252659cb76 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000000
R13: 0000000000000000 R14: 00007f25266e1f80 R15: 00007ffe593a1808
Modules linked in:
---[ end trace b9cbc9a716b6cc83 ]---
RIP: 0010:ext4_do_update_inode fs/ext4/inode.c:5121 [inline]
RIP: 0010:ext4_mark_iloc_dirty+0x276e/0x3710 fs/ext4/inode.c:5712
Code: fd ff ff e9 49 e8 ff ff e8 4f da 9f ff 44 8b 74 24 48 31 ff 44 89 f6 e8 00 d2 9f ff 45 85 f6 0f 84 04 f1 ff ff e8 32 da 9f ff <0f> 0b 48 c7 c7 60 de 2f 85 e8 33 57 3a 02 e8 1f da 9f ff 48 8d 85
RSP: 0018:ffff88800f9e7a68 EFLAGS: 00010212
RAX: 0000000000001095 RBX: ffff88801a58ef80 RCX: ffffc900018e9000
RDX: 0000000000040000 RSI: ffffffff81a6348e RDI: 0000000000000005
RBP: ffff88802a215500 R08: 0000000000000000 R09: ffff88801a58f16f
R10: 0000000000000000 R11: 0000000000000001 R12: ffff88800bcc2000
R13: 0000000000000000 R14: 00000000ffffffff R15: ffff88800f9e7b98
FS:  00007f25251a36c0(0000) GS:ffff88806ce00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fe35d6156f4 CR3: 000000000b08c000 CR4: 0000000000350ef0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000600
note: syz.3.246[6673] exited with preempt_count 1
